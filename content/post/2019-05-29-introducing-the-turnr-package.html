---
title: Introducing The turnR Package
author: Dusty Turner
date: '2019-05-29'
slug: introducing-the-turnr-package
categories:
  - beatnavy
  - devtools
  - roxygen
tags:
  - beatnavy
  - devtools
  - roxygen
---



<div id="inspiration" class="section level2">
<h2>Inspiration</h2>
<p>At the <a href="%22https://www.rstats.nyc/%22">2019 New York R Conference</a>, <a href="%22https://twitter.com/robinson_es%22">Emily Robinson</a> gave a great talk called <a href="%22https://www.rstats.nyc/2019/nyr/%22">“Everything You Wanted to Know About Making R Packages but Were Afraid to Ask”</a> (<em>Note: This link will be live once the video is published</em>). I dabbled with creating a <a href="%22https://github.com/dusty-turner/puertoRicoR%22">package</a> before, but her talk made creating a package so much more tangible (and scale-able).</p>
<p>Armed with her inspiration and her brother’s sage advice (below):</p>
<center>
<blockquote class="twitter-tweet" data-lang="en">
<p lang="en" dir="ltr">
When you’ve written the same code 3 times, write a function<br><br>When you’ve given the same in-person advice 3 times, write a blog post
</p>
— David Robinson (<span class="citation">@drob</span>) <a href="https://twitter.com/drob/status/928447584712253440?ref_src=twsrc%5Etfw">November 9, 2017</a>
</blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</center>
<p>I now have all the encouragement I needed to give this a hack.</p>
<p>I will spare all the frustrating details, but the appropriately named book, <a href="%22https://r-pkgs.org/index.html%22">“R Packages”</a> by <a href="%22https://twitter.com/hadleywickham%22">Hadley Wickham</a> and <a href="%22https://twitter.com/JennyBryan%22">Jenny Bryan</a> tell you all you need to know to create your own package. <a href="%22https://r-pkgs.org/whole-game.html%22">Chapter 2</a> is the one-stop-shop I used to get my package off the ground. There is, of course, more to do to get this fully developed.</p>
</div>
<div id="turnr" class="section level2">
<h2>turnR</h2>
<p>To download the <code>turnR</code> package, run the uncommented code below. Then call the package.</p>
<pre class="r"><code># devtools::install_github(&quot;dusty-turner/turnR&quot;, force = TRUE)
library(turnR)</code></pre>
<div id="available-functions" class="section level3">
<h3>Available Functions</h3>
<p>To get the package off the ground, I created a simple function my 4 year old daughter would love</p>
<pre class="r"><code>mycat(CatName = &quot;Garfield&quot;)</code></pre>
<pre><code>## Your Cat&#39;s Name is Garfield 
##    /\_/\
##   ( o.o )
##    &gt; ^ &lt;
##   (     )
##    ^   ^ 
##    _____</code></pre>
<p>I also find myself making some of the same adjustments over and over again to my ggplots. In particular, I like to center the title and remove the legend for certain plots. Here is a look.</p>
<pre class="r"><code>library(tidyverse)
set.seed(256)
data(&quot;diamonds&quot;) 

diamonds = diamonds %&gt;%
  sample_frac(.1)

diamonds %&gt;%
  ggplot(aes(x=color,y=price,fill = color)) +
  geom_violin() +
  labs(x=&quot;Color&quot;,y=&quot;Price&quot;,title=&quot;Distribution of Diamond Price by Color&quot;, subtitle = &quot;Colored by Color&quot;) +
  theme_turnR()</code></pre>
<p><img src="/post/2019-05-29-introducing-the-turnr-package_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Sometimes, when my ‘x’ axis is a factor, the labels run over. This fixes that issue.</p>
<pre class="r"><code>diamonds %&gt;%
  ggplot(aes(x=cut,y=price,fill = cut)) +
  geom_violin() +
  labs(x=&quot;Cut&quot;,y=&quot;Price&quot;,title=&quot;Distribution of Diamond Price by Color&quot;, subtitle = &quot;Colored by Cut; Faceted by Color&quot;) +
  theme_turnR_f() +
  facet_wrap(~color)</code></pre>
<p><img src="/post/2019-05-29-introducing-the-turnr-package_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Lastly, as an alternative to <code>t.test</code>, I often run a randomization test. It gets frustrating finding my old code for this, so the <code>turnR</code> package to the rescue.</p>
<p>This test returns the probability that each null hypothesis is true along with the difference in means of each samples.</p>
<pre class="r"><code>x=rnorm(100,5,2)
y=rnorm(100,5.1,1)
randtest(x=x,y=y,fun = mean, reps = 1000)[2]</code></pre>
<pre><code>## [[1]]
##    p.x.less.than.y p.x.greater.than.y    two.sided.p.x=y 
##              0.850              0.150              0.306</code></pre>
<pre class="r"><code>randtest(x=x,y=y,fun = mean, reps = 1000)[3]</code></pre>
<pre><code>## [[1]]
## [1] 0.2445667</code></pre>
<p>And of course, it always helps to visualize the difference.</p>
<pre class="r"><code>randtestviz(x=x,y=y,fun=mean,reps=1000)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="/post/2019-05-29-introducing-the-turnr-package_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
</div>
</div>
