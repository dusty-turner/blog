<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8" />

  
  <title>ESPN Fantasy Football V3 API: An &#39;R&#39;ish Solution</title>

  
  




  
  <meta name="author" content="Dusty Turner" />
  <meta name="description" content="ESPN’s New API (V3)In previous seasons, we’ve enjoyed relativly easy access to ESPN’s data. In particular, their data for fantasy sports. Sometime in the football offseason, they altered (I’m hesitating to call it an updade) their AP to V3.
In doing this, previous blog posts by about accessing the V2 API no longer works as I try to replicate previous analysis.
What works Part IMy good friend Steve Morse took the edge off this project with his hard work in extracting the data via Python." />

  
  
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@dtdusty" />
    <meta name="twitter:title" content="ESPN Fantasy Football V3 API: An &#39;R&#39;ish Solution" />
    <meta name="twitter:description" content="ESPN’s New API (V3)In previous seasons, we’ve enjoyed relativly easy access to ESPN’s data. In particular, their data for fantasy sports. Sometime in the football offseason, they altered (I’m hesitating to call it an updade) their AP to V3.
In doing this, previous blog posts by about accessing the V2 API no longer works as I try to replicate previous analysis.
What works Part IMy good friend Steve Morse took the edge off this project with his hard work in extracting the data via Python." />
    <meta name="twitter:image" content="/img/football.jpg" />
  




<meta name="generator" content="Hugo 0.57.2" />


<link rel="canonical" href="/post/espn-fantasy-football-v3-api-an-r-ish-solution/" />
<link rel="alternative" href="/index.xml" title="Dusty Turner" type="application/atom+xml" />


<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="format-detection" content="telephone=no,email=no,adress=no" />
<meta http-equiv="Cache-Control" content="no-transform" />


<meta name="robots" content="index,follow" />
<meta name="referrer" content="origin-when-cross-origin" />
<meta name="google-site-verification" content="-jH0wqxQCDh6JrcCbL9tuGso_EV4u1BRT93XjGqNsfo" />
<meta name="msvalidate.01" content="84DDAAE7986A2E9D73062694A69D33A9" />





<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-title" content="Dusty Turner" />
<meta name="msapplication-tooltip" content="Dusty Turner" />
<meta name='msapplication-navbutton-color' content="#5fbf5e" />
<meta name="msapplication-TileColor" content="#5fbf5e" />
<meta name="msapplication-TileImage" content="/img/tile-image-windows.png" />
<link rel="icon" href="/img/favicon.ico" />
<link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png" />
<link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png" />
<link rel="icon" sizes="192x192" href="/img/touch-icon-android.png" />
<link rel="apple-touch-icon" href="/img/touch-icon-apple.png" />
<link rel="mask-icon" href="/img/safari-pinned-tab.svg" color="#5fbf5e" />



<link rel="stylesheet" href="//cdn.bootcss.com/video.js/6.2.8/alt/video-js-cdn.min.css" />

<link rel="stylesheet" href="/css/bundle.css" />
<link rel="stylesheet" href="/css/lightfair.css" rel="stylesheet" id="theme-stylesheet">
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

  
  <!--[if lt IE 9]>
    <script src="//cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <script src="//cdn.bootcss.com/video.js/6.2.8/ie8/videojs-ie8.min.js"></script>
  <![endif]-->

<!--[if lte IE 11]>
    <script src="//cdn.bootcss.com/classlist/1.1.20170427/classList.min.js"></script>
  <![endif]-->


<script src="//cdn.bootcss.com/object-fit-images/3.2.3/ofi.min.js"></script>


<script src="//cdn.bootcss.com/smooth-scroll/12.1.4/js/smooth-scroll.polyfills.min.js"></script>


</head>
  <body>
    
    <div class="suspension">
      <a title="Go to top" class="to-top is-hide"><span class="icon icon-up"></span></a>
      
        
        <a title="Go to comments" class="to-comment" href="#disqus_thread"><span class="icon icon-comment"></span></a>
        
      
    </div>
    
    
  <header class="site-header">
  <img class="avatar" src="/img/dusty.png" alt="Avatar">
  
  <h2 class="title">Dusty Turner</h2>
  
  <p class="subtitle">~Data Science: Lightly Edited~</p>
  <button class="menu-toggle" type="button">
    <span class="icon icon-menu"></span>
  </button>
  <nav class="site-menu collapsed">
    <h2 class="offscreen">Main Menu</h2>
    <ul class="menu-list">
      
      
      
      
        <li class="menu-item  is-active"><a href="/">Home</a></li>
      
        <li class="menu-item "><a href="https://github.com/dusty-turner">Github</a></li>
      
        <li class="menu-item "><a href="/links/">Links</a></li>
      
        <li class="menu-item "><a href="/about/">About</a></li>
      
        <li class="menu-item "><a href="/community/">Community</a></li>
      
        <li class="menu-item "><a href="/cv.pdf">CV</a></li>
      
    </ul>
  </nav>
  <nav class="social-menu collapsed">
    <h2 class="offscreen">Social Networks</h2>
    <ul class="social-list">

      
      <li class="social-item">
        <a href="mailto:dusty.s.turner@gmail.com" title="Email"><span class="icon icon-email"></span></a>
      </li>

      
      <li class="social-item">
        <a href="//github.com/dusty-turner" title="GitHub"><span class="icon icon-github"></span></a>
      </li>

      <li class="social-item">
        <a href="//twitter.com/dtdusty" title="Twitter"><span class="icon icon-twitter"></span></a>
      </li>

      <li class="social-item">
        <a href="//www.facebook.com/dusty.turner" title="Facebook"><span class="icon icon-facebook"></span></a>
      </li>

      

      

      

      

      

      

      

      

      

      

      

      

      

      <li class="social-item">
        <a href="//www.linkedin.com/in/dusty-turner-34a148112" title="Linkedin"><span class="icon icon-linkedin"></span></a>
      </li>

      

      

      

      <li class="social-item">
        <a href="/index.xml"><span class="icon icon-rss" title="RSS"></span></a>
      </li>

    </ul>
  </nav>
</header>

  <section class="main post-detail">
    <header class="post-header">
      <h1 class="post-title">ESPN Fantasy Football V3 API: An &#39;R&#39;ish Solution</h1>
      <p class="post-meta">@Dusty Turner · Aug 29, 2019 · 3 min read</p>
    </header>
    <article class="post-content">


<div id="espns-new-api-v3" class="section level2">
<h2>ESPN’s New API (V3)</h2>
<p>In previous seasons, we’ve enjoyed relativly easy access to ESPN’s data. In particular, their data for fantasy sports. Sometime in the football offseason, they altered (I’m hesitating to call it an updade) their AP to V3.</p>
<p>In doing this, previous blog posts by about accessing the <a href="%22https://dusty-turner.netlify.com/post/espn-yahoo-api-navigation/%22">V2 API</a> no longer works as I try to replicate <a href="%22https://dusty-turner.netlify.com/post/mathlete-fantasy-football-analysis2018/%22">previous analysis</a>.</p>
</div>
<div id="what-works-part-i" class="section level2">
<h2>What works Part I</h2>
<p>My good friend <a href="https://stmorse.github.io/">Steve Morse</a> took the edge off this project with his hard work in extracting the data via Python. His <a href="%22https://stmorse.github.io/journal/espn-fantasy-v3.html%22">blog post</a> shows how to access the data through the new API. He provides more details on how to pass your cookies for private leagues. In a <a href="%22https://stmorse.github.io/journal/espn-fantasy-projections.html%22">subsequent post</a> Steve does some analysis on his league which some of that will be mirrored here.</p>
<center>
<blockquote class="twitter-tweet">
<p lang="en" dir="ltr">
Quick crash course on ESPN’s new <a href="https://twitter.com/hashtag/fantasyfootball?src=hash&amp;ref_src=twsrc%5Etfw">#fantasyfootball</a> API, <a href="https://twitter.com/hashtag/python?src=hash&amp;ref_src=twsrc%5Etfw">#python</a> focused — <a href="https://t.co/bwPLJLDpmk">https://t.co/bwPLJLDpmk</a> <a href="https://t.co/exi2NKLXV3">pic.twitter.com/exi2NKLXV3</a>
</p>
— Steven Morse (<span class="citation">@thestevemo</span>) <a href="https://twitter.com/thestevemo/status/1156922606743957504?ref_src=twsrc%5Etfw">August 1, 2019</a>
</blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</center>
</div>
<div id="what-doesnt-work" class="section level2">
<h2>What Doesn’t Work</h2>
<p>Build URL</p>
<pre class="r"><code>base = &quot;http://fantasy.espn.com/apis/v3/games/ffl/seasons/&quot;
year = &quot;2019&quot;
mid = &quot;/segments/0/leagues/&quot;
leagueID = &quot;89417258&quot;
tail = &quot;?view=mDraftDetail&amp;view=mLiveScoring&amp;view=mMatchupScore&amp;view=mPendingTransactions&amp;view=mPositionalRatings&amp;view=mSettings&amp;view=mTeam&amp;view=modular&amp;view=mNav&amp;view=mMatchupScore&quot;
url = paste0(base,year,mid,leagueID,tail)</code></pre>
<pre class="r"><code>ESPNGet &lt;- httr::GET(url = url,
                     httr::set_cookies(
                       `swid` = &quot;{78538BF1-DE01-4269-A101-AC98E7620E27}&quot;,
                       `espn_s2` =  &quot;AEAysPn25UkePQCS33o3NmdRItXI0fZ7BhQFCcY020p8yCq0CDJGrlvuqAxjP42wn%2F8YZymuQOcG94GHEtkIIHnU7BWfQr6cpEKQXkcev7zKxEWiRf57PlIPEsWqIIm72dSmnL4dxW8TYufPzrIbiNZvtU0cYnLBV3nw1CAmc%2BGwghKIqRy7qPMCsSN13WibU5BHxVfxjkRttkE5Yd27cP8vAbndYor2P2FZrR%2BPVbRGThNIL8XuEJBw2rLmhqmc6tQA%2BGeNNh9dXrySFJHm72TY&quot;
                     ))
  
ESPNGet$status_code</code></pre>
<pre><code>## [1] 200</code></pre>
<pre class="r"><code># ESPNGet &lt;- httr::GET(url = url)
ESPNRaw &lt;- rawToChar(ESPNGet$content)
ESPNFromJSON &lt;- jsonlite::fromJSON(ESPNRaw)</code></pre>
<pre class="r"><code>library(tidyverse)
library(reticulate)</code></pre>
<pre class="python"><code>import requests

url = &quot;http://fantasy.espn.com/apis/v3/games/ffl/seasons/2019/segments/0/leagues/89417258?view=mDraftDetail&amp;view=mLiveScoring&amp;view=mMatchupScore&amp;view=mPendingTransactions&amp;view=mPositionalRatings&amp;view=mSettings&amp;view=mTeam&amp;view=modular&amp;view=mNav&amp;view=mMatchupScore&quot;

r = requests.get(url)
d = r.json()</code></pre>
<pre class="r"><code>    ## records
  py$d$teams %&gt;% map_df(magrittr::extract, c(&quot;location&quot;, &quot;nickname&quot;, &quot;id&quot;)) %&gt;% bind_cols(
    py$d$teams %&gt;% map(&quot;record&quot;) %&gt;% map(&quot;overall&quot;) %&gt;% map_df(magrittr::extract, c(&quot;losses&quot;, &quot;wins&quot;))
  )</code></pre>
<pre><code>## # A tibble: 10 x 5
##    location      nickname       id losses  wins
##    &lt;chr&gt;         &lt;chr&gt;       &lt;int&gt;  &lt;int&gt; &lt;int&gt;
##  1 &#39;R&#39;m Chair    Quarterback     1      0     0
##  2 Philly        Chapmaniacs     2      0     0
##  3 The           Plainsmen       3      0     0
##  4 The OBJective Functions       4      0     0
##  5 Max           Drake           5      0     0
##  6 Team          Ward            6      0     0
##  7 &quot;Compute &quot;    This!           7      0     0
##  8 The           Chief           8      0     0
##  9 Dallas        The boys        9      0     0
## 10 Palindrome    Tikkit         10      0     0</code></pre>
<pre class="r"><code>    ## schedule below    
py$d$schedule %&gt;% map_df(magrittr::extract, c(&quot;winner&quot;,&quot;matchupPeriodId&quot;)) %&gt;% 
  bind_cols(py$d$schedule %&gt;% map(&quot;away&quot;) %&gt;% map_df(magrittr::extract,c(&quot;teamId&quot;,&quot;totalPoints&quot;))) %&gt;%
  bind_cols(py$d$schedule %&gt;% map(&quot;home&quot;) %&gt;% map_df(magrittr::extract,c(&quot;teamId&quot;,&quot;totalPoints&quot;)))</code></pre>
<pre><code>## # A tibble: 65 x 6
##    winner    matchupPeriodId teamId totalPoints teamId1 totalPoints1
##    &lt;chr&gt;               &lt;int&gt;  &lt;int&gt;       &lt;dbl&gt;   &lt;int&gt;        &lt;dbl&gt;
##  1 UNDECIDED               1      2           0       9            0
##  2 UNDECIDED               1      3           0       7            0
##  3 UNDECIDED               1      6           0       4            0
##  4 UNDECIDED               1      1           0       5            0
##  5 UNDECIDED               1     10           0       8            0
##  6 UNDECIDED               2      6           0       3            0
##  7 UNDECIDED               2      9           0       1            0
##  8 UNDECIDED               2      2           0      10            0
##  9 UNDECIDED               2      7           0       5            0
## 10 UNDECIDED               2      4           0       8            0
## # ... with 55 more rows</code></pre>
</div>
</article>
    <footer class="post-footer">
      
      <ul class="post-tags">
        
          <li><a href="/tags/espn-api"><span class="tag">ESPN API</span></a></li>
        
          <li><a href="/tags/fantasy-football"><span class="tag">Fantasy Football</span></a></li>
        
          <li><a href="/tags/tidyverse"><span class="tag">Tidyverse</span></a></li>
        
          <li><a href="/tags/purrr"><span class="tag">Purrr</span></a></li>
        
          <li><a href="/tags/python"><span class="tag">Python</span></a></li>
        
      </ul>
      
      <p class="post-copyright">
        © This post is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License，please give source if you likes to quote or reproduce.
      </p>
    </footer>
    
      <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "dusty-turner" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      
    
  </section>
  <footer class="site-footer">
  <p>© 2017-2019 Dusty Turner</p>
  <p>Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> with theme <a href="https://github.com/laozhu/hugo-nuo" target="_blank">Nuo</a>.</p>
  
</footer>



<script async src="//cdn.bootcss.com/video.js/6.2.8/alt/video.novtt.min.js"></script>
<script async src="//cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      displayMath: [['$$','$$'], ['\[','\]']],
      processEscapes: true,
      processEnvironments: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      TeX: { equationNumbers: { autoNumber: "AMS" },
      extensions: ["AMSmath.js", "AMSsymbols.js"] }
    }
  });
</script>
<script type="text/x-mathjax-config">
  // Fix <code> tags after MathJax finishes running. This is a
  // hack to overcome a shortcoming of Markdown. Discussion at
  // https://github.com/mojombo/jekyll/issues/199
  MathJax.Hub.Queue(() => {
    MathJax.Hub.getAllJax().map(v => v.SourceElement().parentNode.className += ' has-jax');
  });
</script>

<script src="/js/bundle.js"></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-109926409-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>





  </body>
</html>
