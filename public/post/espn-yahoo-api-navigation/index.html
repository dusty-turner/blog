<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8" />

  
  <title>Fantasy Football - Navigating the ESPN and Yahoo! APIs</title>

  
  




  
  <meta name="author" content="Dusty Turner" />
  <meta name="description" content="IntroductionFor the last two years I’ve had the honor of being the commissioner for the West Point Department of Mathematical Science’s Fantasy Football League. This year we had 20 managers so we had to split our department into two leagues. I hosted one using ESPN and a colleague hosted on in Yahoo.
In order to compare our two leagues, I will use the ESPN API and YAHOO API to download our league’s information." />

  
  
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@dtdusty" />
    <meta name="twitter:title" content="Fantasy Football - Navigating the ESPN and Yahoo! APIs" />
    <meta name="twitter:description" content="IntroductionFor the last two years I’ve had the honor of being the commissioner for the West Point Department of Mathematical Science’s Fantasy Football League. This year we had 20 managers so we had to split our department into two leagues. I hosted one using ESPN and a colleague hosted on in Yahoo.
In order to compare our two leagues, I will use the ESPN API and YAHOO API to download our league’s information." />
    <meta name="twitter:image" content="/img/avatar.jpg" />
  




<meta name="generator" content="Hugo 0.57.2" />


<link rel="canonical" href="/post/espn-yahoo-api-navigation/" />
<link rel="alternative" href="/index.xml" title="Dusty Turner" type="application/atom+xml" />


<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="format-detection" content="telephone=no,email=no,adress=no" />
<meta http-equiv="Cache-Control" content="no-transform" />


<meta name="robots" content="index,follow" />
<meta name="referrer" content="origin-when-cross-origin" />
<meta name="google-site-verification" content="-jH0wqxQCDh6JrcCbL9tuGso_EV4u1BRT93XjGqNsfo" />
<meta name="msvalidate.01" content="84DDAAE7986A2E9D73062694A69D33A9" />





<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-title" content="Dusty Turner" />
<meta name="msapplication-tooltip" content="Dusty Turner" />
<meta name='msapplication-navbutton-color' content="#5fbf5e" />
<meta name="msapplication-TileColor" content="#5fbf5e" />
<meta name="msapplication-TileImage" content="/img/tile-image-windows.png" />
<link rel="icon" href="/img/favicon.ico" />
<link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png" />
<link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png" />
<link rel="icon" sizes="192x192" href="/img/touch-icon-android.png" />
<link rel="apple-touch-icon" href="/img/touch-icon-apple.png" />
<link rel="mask-icon" href="/img/safari-pinned-tab.svg" color="#5fbf5e" />



<link rel="stylesheet" href="//cdn.bootcss.com/video.js/6.2.8/alt/video-js-cdn.min.css" />

<link rel="stylesheet" href="/css/bundle.css" />
<link rel="stylesheet" href="/css/lightfair.css" rel="stylesheet" id="theme-stylesheet">
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

  
  <!--[if lt IE 9]>
    <script src="//cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <script src="//cdn.bootcss.com/video.js/6.2.8/ie8/videojs-ie8.min.js"></script>
  <![endif]-->

<!--[if lte IE 11]>
    <script src="//cdn.bootcss.com/classlist/1.1.20170427/classList.min.js"></script>
  <![endif]-->


<script src="//cdn.bootcss.com/object-fit-images/3.2.3/ofi.min.js"></script>


<script src="//cdn.bootcss.com/smooth-scroll/12.1.4/js/smooth-scroll.polyfills.min.js"></script>


</head>
  <body>
    
    <div class="suspension">
      <a title="Go to top" class="to-top is-hide"><span class="icon icon-up"></span></a>
      
        
        <a title="Go to comments" class="to-comment" href="#disqus_thread"><span class="icon icon-comment"></span></a>
        
      
    </div>
    
    
  <header class="site-header">
  <img class="avatar" src="/img/dusty.png" alt="Avatar">
  
  <h2 class="title">Dusty Turner</h2>
  
  <p class="subtitle">~Data Science: Lightly Edited~</p>
  <button class="menu-toggle" type="button">
    <span class="icon icon-menu"></span>
  </button>
  <nav class="site-menu collapsed">
    <h2 class="offscreen">Main Menu</h2>
    <ul class="menu-list">
      
      
      
      
        <li class="menu-item  is-active"><a href="/">Home</a></li>
      
        <li class="menu-item "><a href="https://github.com/dusty-turner">Github</a></li>
      
        <li class="menu-item "><a href="/links/">Links</a></li>
      
        <li class="menu-item "><a href="/about/">About</a></li>
      
        <li class="menu-item "><a href="/community/">Community</a></li>
      
        <li class="menu-item "><a href="/cv.pdf">CV</a></li>
      
    </ul>
  </nav>
  <nav class="social-menu collapsed">
    <h2 class="offscreen">Social Networks</h2>
    <ul class="social-list">

      
      <li class="social-item">
        <a href="mailto:dusty.s.turner@gmail.com" title="Email"><span class="icon icon-email"></span></a>
      </li>

      
      <li class="social-item">
        <a href="//github.com/dusty-turner" title="GitHub"><span class="icon icon-github"></span></a>
      </li>

      <li class="social-item">
        <a href="//twitter.com/dtdusty" title="Twitter"><span class="icon icon-twitter"></span></a>
      </li>

      <li class="social-item">
        <a href="//www.facebook.com/dusty.turner" title="Facebook"><span class="icon icon-facebook"></span></a>
      </li>

      

      

      

      

      

      

      

      

      

      

      

      

      

      <li class="social-item">
        <a href="//www.linkedin.com/in/dusty-turner-34a148112" title="Linkedin"><span class="icon icon-linkedin"></span></a>
      </li>

      

      

      

      <li class="social-item">
        <a href="/index.xml"><span class="icon icon-rss" title="RSS"></span></a>
      </li>

    </ul>
  </nav>
</header>

  <section class="main post-detail">
    <header class="post-header">
      <h1 class="post-title">Fantasy Football - Navigating the ESPN and Yahoo! APIs</h1>
      <p class="post-meta">@Dusty Turner · Dec 29, 2018 · 8 min read</p>
    </header>
    <article class="post-content">
<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<link href="/rmarkdown-libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
<script src="/rmarkdown-libs/datatables-binding/datatables.js"></script>
<link href="/rmarkdown-libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="/rmarkdown-libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="/rmarkdown-libs/dt-core/js/jquery.dataTables.min.js"></script>
<link href="/rmarkdown-libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="/rmarkdown-libs/crosstalk/js/crosstalk.min.js"></script>


<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>For the last two years I’ve had the honor of being the commissioner for the West Point Department of Mathematical Science’s Fantasy Football League. This year we had 20 managers so we had to split our department into two leagues. I hosted one using ESPN and a colleague hosted on in Yahoo.</p>
<p>In order to compare our two leagues, I will use the ESPN API and YAHOO API to download our league’s information. I’ll join the two leagues and identify the top scoring teams each week and conduct some other comparative analysis.</p>
<p>I’ll also use this post as both a tutorial of how to download your league information.</p>
<p>I am very interested in feedback to improve this process. Shoot me a note or leave a comment below.</p>
<div id="libraries" class="section level3">
<h3>Libraries</h3>
<p>Here are the libraries we’ll need to do this analysis.</p>
<pre class="r"><code>library(tidyverse)
library(httr)
library(httpuv)
library(XML)
library(jsonlite)
library(stringr)
library(DT)</code></pre>
</div>
</div>
<div id="espn-api" class="section level2">
<h2>ESPN API</h2>
<p>Downloading your league information with the ESPN API is simple.</p>
<p>First, you’ll need to make sure your ESPN league is public.</p>
<pre class="r"><code>baseurl = &quot;http://games.espn.com/ffl/api/v2/leagueSettings?leagueId=&quot;
leagueID = &quot;1314476&quot;
season = &quot;&amp;seasonId=2018&quot;</code></pre>
<p>Next, build the url:</p>
<pre class="r"><code>url = paste0(baseurl, leagueID, season)</code></pre>
<p>Then, download the data. The API will download your information in JSON format. You’ll need to convert it to a format you can work with in R.</p>
<pre class="r"><code>ESPNGet &lt;- GET(url = url)
ESPNRaw &lt;- rawToChar(ESPNGet$content)
ESPNFromJSON &lt;- fromJSON(ESPNRaw)</code></pre>
<p>This JSON file contains a ton of information about your league. You can hack away to find out all types of information, but I’ve experimented a bit and have decided to extract both teams as well as their scores.</p>
<p>Below is a shell for the dataframe I will build.</p>
<pre class="r"><code>df = rep(NA, 7)
names(df) = c(&quot;AwayLoc&quot;,
              &quot;AwayNick&quot;,
              &quot;HomeLoc&quot;,
              &quot;HomeNick&quot;,
              &quot;AwayScore&quot;,
              &quot;HomeScore&quot;,
              &quot;week&quot;)</code></pre>
<p>Next, we’ll loop through the JSON file to extract the information each week.</p>
<pre class="r"><code>for (j in 1:10) {
  for (i in 1:16) {
    vec = c(
      ESPNFromJSON$leaguesettings$teams[[j]]$scheduleItems$matchups[[i]]$awayTeam$teamLocation,
      ESPNFromJSON$leaguesettings$teams[[j]]$scheduleItems$matchups[[i]]$awayTeam$teamNickname,
      ESPNFromJSON$leaguesettings$teams[[j]]$scheduleItems$matchups[[i]]$homeTeam$teamLocation,
      ESPNFromJSON$leaguesettings$teams[[j]]$scheduleItems$matchups[[i]]$homeTeam$teamNickname,
      ESPNFromJSON$leaguesettings$teams[[j]]$scheduleItems$matchups[[i]]$awayTeamScores[[1]],
      ESPNFromJSON$leaguesettings$teams[[j]]$scheduleItems$matchups[[i]]$homeTeamScores[[1]],
      week = i
    )
    df = rbind(df, vec)
  }
}
df = as.tibble(df) %&gt;% remove_rownames() %&gt;% filter(complete.cases(.)) %&gt;% unique()</code></pre>
<p>Now, we have the information. Lets take a look at it.</p>
<pre class="r"><code>df %&gt;%
  datatable()</code></pre>
<div id="htmlwidget-1" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80"],["Raw","Team","Team","2-2-2","Team","'R'm Chair","Team","Green","Team","Gosset's","Viking Joe","Team","Team","Team","Team","Team","Viking Joe","'R'm Chair","Epsilon","Team","'R'm Chair","Gosset's","'R'm Chair","Las Vegas","Raw","Green","'R'm Chair","'R'm Chair","'R'm Chair","'R'm Chair","Raw","Gosset's","Raw","Raw","Green","Raw","Epsilon","Raw","Viking Joe","2-2-2","Viking Joe","Viking Joe","Viking Joe","Green","Epsilon","Las Vegas","Gosset's","Las Vegas","Las Vegas","Las Vegas","Las Vegas","Team","Gosset's","2-2-2","2-2-2","Green","Team","Viking Joe","Green","Gosset's","Epsilon","Green","Green","Team","Epsilon","2-2-2","Viking Joe","Epsilon","Team","Team","Team","2-2-2","Team","Team","2-2-2","Viking Joe","Gosset's","2-2-2","Viking Joe","Gosset's"],["and Savage","Shank a Potamus","Shank a Potamus","Mega-H-Ertz","Shank a Potamus","Quarterback","Shank a Potamus","Baye's Theorem","Shank a Potamus","T-Down","Lindquist","Shank a Potamus","Shank a Potamus","Shank a Potamus","Shank a Potamus","Shank a Potamus","Lindquist","Quarterback","Ballers","Guns N' Rosas","Quarterback","T-Down","Quarterback","Radians","and Savage","Baye's Theorem","Quarterback","Quarterback","Quarterback","Quarterback","and Savage","T-Down","and Savage","and Savage","Baye's Theorem","and Savage","Ballers","and Savage","Lindquist","Mega-H-Ertz","Lindquist","Lindquist","Lindquist","Baye's Theorem","Ballers","Radians","T-Down","Radians","Radians","Radians","Radians","Guns N' Rosas","T-Down","Mega-H-Ertz","Mega-H-Ertz","Baye's Theorem","Guns N' Rosas","Lindquist","Baye's Theorem","T-Down","Ballers","Baye's Theorem","Baye's Theorem","Guns N' Rosas","Ballers","Mega-H-Ertz","Lindquist","Ballers","Guns N' Rosas","Guns N' Rosas","Guns N' Rosas","Mega-H-Ertz","Guns N' Rosas","Guns N' Rosas","Mega-H-Ertz","Lindquist","T-Down","Mega-H-Ertz","Lindquist","T-Down"],["Team","Gosset's","Viking Joe","Team","Epsilon","Team","Team","Team","Raw","Team","Team","2-2-2","Las Vegas","Las Vegas","Green","'R'm Chair","'R'm Chair","Green","'R'm Chair","'R'm Chair","Las Vegas","'R'm Chair","2-2-2","'R'm Chair","'R'm Chair","'R'm Chair","Epsilon","Team","Gosset's","Epsilon","Team","Raw","Viking Joe","2-2-2","Raw","Las Vegas","Raw","Gosset's","Raw","Raw","Raw","Raw","Raw","Las Vegas","Las Vegas","Team","Las Vegas","2-2-2","Viking Joe","Green","Epsilon","Las Vegas","Las Vegas","Las Vegas","Green","Epsilon","Green","Green","Team","Green","Green","2-2-2","Epsilon","Epsilon","Gosset's","Epsilon","Epsilon","Team","Epsilon","Viking Joe","Gosset's","Team","2-2-2","Gosset's","Gosset's","2-2-2","2-2-2","Viking Joe","Gosset's","Viking Joe"],["Shank a Potamus","T-Down","Lindquist","Shank a Potamus","Ballers","Shank a Potamus","Guns N' Rosas","Shank a Potamus","and Savage","Shank a Potamus","Shank a Potamus","Mega-H-Ertz","Radians","Radians","Baye's Theorem","Quarterback","Quarterback","Baye's Theorem","Quarterback","Quarterback","Radians","Quarterback","Mega-H-Ertz","Quarterback","Quarterback","Quarterback","Ballers","Guns N' Rosas","T-Down","Ballers","Guns N' Rosas","and Savage","Lindquist","Mega-H-Ertz","and Savage","Radians","and Savage","T-Down","and Savage","and Savage","and Savage","and Savage","and Savage","Radians","Radians","Guns N' Rosas","Radians","Mega-H-Ertz","Lindquist","Baye's Theorem","Ballers","Radians","Radians","Radians","Baye's Theorem","Ballers","Baye's Theorem","Baye's Theorem","Guns N' Rosas","Baye's Theorem","Baye's Theorem","Mega-H-Ertz","Ballers","Ballers","T-Down","Ballers","Ballers","Guns N' Rosas","Ballers","Lindquist","T-Down","Guns N' Rosas","Mega-H-Ertz","T-Down","T-Down","Mega-H-Ertz","Mega-H-Ertz","Lindquist","T-Down","Lindquist"],["112.24","119.3","104.24","147.18","77.94","124.06","81.84","140.96","97.56","131.66","109.4","110.58","94.04","93.92","115.6","115.22","116.68","108.3","103.9","110.84","101.7","135.52","106.9","147.66","83.96","98.92","107.32","74.48","147.2","64.26","94.44","107.56","81.42","72.98","111.38","119.06","111.68","109.48","106.62","101.68","98.5","65.8","83.54","119.86","120.18","77.92","112.06","131.4","135.86","86.3","112.78","100.74","95.22","176.94","141.84","110.5","115.08","118.7","133","145.26","97.9","105.1","136.06","112.64","128.86","82.58","68.8","163.32","79","133.3","125.4","138.92","108.34","115.96","126.26","114.04","98.5","150.9","93.9","152.7"],["130.66","142.74","73.68","130.88","128.98","91.52","101.2","117.46","67.56","99.82","121.28","95.34","104.92","90.26","123.32","99.74","119.04","90.84","110.44","82.54","116.84","124.54","96.6","117.34","113.62","165.22","126.78","94","136.38","103.5","118.9","94","87.88","146.52","117.2","149.78","99.64","159.42","114.68","135.26","105.04","105.58","124.28","112.28","116.26","122.9","152.66","107.48","92.94","129.86","111.96","106.42","83.48","79.78","84.3","103.56","119.8","91.94","120.08","147.88","90.36","75.64","146.9","99.7","154.48","87.22","86.8","112.22","132.78","96.2","130.02","86.58","65.92","122.82","106.84","115.32","140.42","148.4","128.12","138.4"],["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","1","2","3","4","5","7","8","9","10","11","12","13","14","15","2","3","4","5","6","7","8","11","12","13","14","15","16","1","2","3","4","6","8","10","11","12","15","16","3","4","5","7","9","12","13","14","16","1","6","7","9","10","14","6","8","11","15","16","1","2","9","10","5","13"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>AwayLoc<\/th>\n      <th>AwayNick<\/th>\n      <th>HomeLoc<\/th>\n      <th>HomeNick<\/th>\n      <th>AwayScore<\/th>\n      <th>HomeScore<\/th>\n      <th>week<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"order":[],"autoWidth":false,"orderClasses":false,"columnDefs":[{"orderable":false,"targets":0}]}},"evals":[],"jsHooks":[]}</script>
<p>Lets clean this up a little bit and take another look.</p>
<pre class="r"><code>espndf = df %&gt;%
  unite(TeamA, c(&quot;AwayLoc&quot;, &quot;AwayNick&quot;)) %&gt;%
  unite(TeamB, c(&quot;HomeLoc&quot;, &quot;HomeNick&quot;)) %&gt;%
  rename(PointsA = AwayScore, PointsB = HomeScore) %&gt;%
  mutate(PointsA = as.numeric(PointsA),PointsB = as.numeric(PointsB)) %&gt;%
  mutate(league = &quot;espn&quot;)

espndf %&gt;% datatable()</code></pre>
<div id="htmlwidget-2" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80"],["Raw_and Savage","Team_Shank a Potamus","Team_Shank a Potamus","2-2-2_Mega-H-Ertz","Team_Shank a Potamus","'R'm Chair_Quarterback","Team_Shank a Potamus","Green_Baye's Theorem","Team_Shank a Potamus","Gosset's_T-Down","Viking Joe_Lindquist","Team_Shank a Potamus","Team_Shank a Potamus","Team_Shank a Potamus","Team_Shank a Potamus","Team_Shank a Potamus","Viking Joe_Lindquist","'R'm Chair_Quarterback","Epsilon_Ballers","Team_Guns N' Rosas","'R'm Chair_Quarterback","Gosset's_T-Down","'R'm Chair_Quarterback","Las Vegas_Radians","Raw_and Savage","Green_Baye's Theorem","'R'm Chair_Quarterback","'R'm Chair_Quarterback","'R'm Chair_Quarterback","'R'm Chair_Quarterback","Raw_and Savage","Gosset's_T-Down","Raw_and Savage","Raw_and Savage","Green_Baye's Theorem","Raw_and Savage","Epsilon_Ballers","Raw_and Savage","Viking Joe_Lindquist","2-2-2_Mega-H-Ertz","Viking Joe_Lindquist","Viking Joe_Lindquist","Viking Joe_Lindquist","Green_Baye's Theorem","Epsilon_Ballers","Las Vegas_Radians","Gosset's_T-Down","Las Vegas_Radians","Las Vegas_Radians","Las Vegas_Radians","Las Vegas_Radians","Team_Guns N' Rosas","Gosset's_T-Down","2-2-2_Mega-H-Ertz","2-2-2_Mega-H-Ertz","Green_Baye's Theorem","Team_Guns N' Rosas","Viking Joe_Lindquist","Green_Baye's Theorem","Gosset's_T-Down","Epsilon_Ballers","Green_Baye's Theorem","Green_Baye's Theorem","Team_Guns N' Rosas","Epsilon_Ballers","2-2-2_Mega-H-Ertz","Viking Joe_Lindquist","Epsilon_Ballers","Team_Guns N' Rosas","Team_Guns N' Rosas","Team_Guns N' Rosas","2-2-2_Mega-H-Ertz","Team_Guns N' Rosas","Team_Guns N' Rosas","2-2-2_Mega-H-Ertz","Viking Joe_Lindquist","Gosset's_T-Down","2-2-2_Mega-H-Ertz","Viking Joe_Lindquist","Gosset's_T-Down"],["Team_Shank a Potamus","Gosset's_T-Down","Viking Joe_Lindquist","Team_Shank a Potamus","Epsilon_Ballers","Team_Shank a Potamus","Team_Guns N' Rosas","Team_Shank a Potamus","Raw_and Savage","Team_Shank a Potamus","Team_Shank a Potamus","2-2-2_Mega-H-Ertz","Las Vegas_Radians","Las Vegas_Radians","Green_Baye's Theorem","'R'm Chair_Quarterback","'R'm Chair_Quarterback","Green_Baye's Theorem","'R'm Chair_Quarterback","'R'm Chair_Quarterback","Las Vegas_Radians","'R'm Chair_Quarterback","2-2-2_Mega-H-Ertz","'R'm Chair_Quarterback","'R'm Chair_Quarterback","'R'm Chair_Quarterback","Epsilon_Ballers","Team_Guns N' Rosas","Gosset's_T-Down","Epsilon_Ballers","Team_Guns N' Rosas","Raw_and Savage","Viking Joe_Lindquist","2-2-2_Mega-H-Ertz","Raw_and Savage","Las Vegas_Radians","Raw_and Savage","Gosset's_T-Down","Raw_and Savage","Raw_and Savage","Raw_and Savage","Raw_and Savage","Raw_and Savage","Las Vegas_Radians","Las Vegas_Radians","Team_Guns N' Rosas","Las Vegas_Radians","2-2-2_Mega-H-Ertz","Viking Joe_Lindquist","Green_Baye's Theorem","Epsilon_Ballers","Las Vegas_Radians","Las Vegas_Radians","Las Vegas_Radians","Green_Baye's Theorem","Epsilon_Ballers","Green_Baye's Theorem","Green_Baye's Theorem","Team_Guns N' Rosas","Green_Baye's Theorem","Green_Baye's Theorem","2-2-2_Mega-H-Ertz","Epsilon_Ballers","Epsilon_Ballers","Gosset's_T-Down","Epsilon_Ballers","Epsilon_Ballers","Team_Guns N' Rosas","Epsilon_Ballers","Viking Joe_Lindquist","Gosset's_T-Down","Team_Guns N' Rosas","2-2-2_Mega-H-Ertz","Gosset's_T-Down","Gosset's_T-Down","2-2-2_Mega-H-Ertz","2-2-2_Mega-H-Ertz","Viking Joe_Lindquist","Gosset's_T-Down","Viking Joe_Lindquist"],[112.24,119.3,104.24,147.18,77.94,124.06,81.84,140.96,97.56,131.66,109.4,110.58,94.04,93.92,115.6,115.22,116.68,108.3,103.9,110.84,101.7,135.52,106.9,147.66,83.96,98.92,107.32,74.48,147.2,64.26,94.44,107.56,81.42,72.98,111.38,119.06,111.68,109.48,106.62,101.68,98.5,65.8,83.54,119.86,120.18,77.92,112.06,131.4,135.86,86.3,112.78,100.74,95.22,176.94,141.84,110.5,115.08,118.7,133,145.26,97.9,105.1,136.06,112.64,128.86,82.58,68.8,163.32,79,133.3,125.4,138.92,108.34,115.96,126.26,114.04,98.5,150.9,93.9,152.7],[130.66,142.74,73.68,130.88,128.98,91.52,101.2,117.46,67.56,99.82,121.28,95.34,104.92,90.26,123.32,99.74,119.04,90.84,110.44,82.54,116.84,124.54,96.6,117.34,113.62,165.22,126.78,94,136.38,103.5,118.9,94,87.88,146.52,117.2,149.78,99.64,159.42,114.68,135.26,105.04,105.58,124.28,112.28,116.26,122.9,152.66,107.48,92.94,129.86,111.96,106.42,83.48,79.78,84.3,103.56,119.8,91.94,120.08,147.88,90.36,75.64,146.9,99.7,154.48,87.22,86.8,112.22,132.78,96.2,130.02,86.58,65.92,122.82,106.84,115.32,140.42,148.4,128.12,138.4],["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","1","2","3","4","5","7","8","9","10","11","12","13","14","15","2","3","4","5","6","7","8","11","12","13","14","15","16","1","2","3","4","6","8","10","11","12","15","16","3","4","5","7","9","12","13","14","16","1","6","7","9","10","14","6","8","11","15","16","1","2","9","10","5","13"],["espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn","espn"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>TeamA<\/th>\n      <th>TeamB<\/th>\n      <th>PointsA<\/th>\n      <th>PointsB<\/th>\n      <th>week<\/th>\n      <th>league<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[3,4]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>The resulting dataframe with has all 14 weeks of regular season games. Great work!</p>
</div>
<div id="yahoo-api" class="section level2">
<h2>YAHOO API</h2>
<p>The YAHOO API is a little more difficult to navigate. I figured most of it out at the Yahoo Fantasy Sports Developer <a href="https://developer.yahoo.com/fantasysports/guide/">Documentation</a>, this <a href="https://stackoverflow.com/questions/49709988/r-yahoo-fantasy-api-permission">stackoverflow</a> page, and a lot of trial and error.</p>
<p>It requires a Yahoo <a href="https://developer.yahoo.com/apps/create/">developer API</a>. Be sure to select <code>Installed Application</code> as the application type and check <code>fantasy sports</code> at the bottom.</p>
<p>Next, you’ll need to make a handshake with your API and create a token.</p>
<pre class="r"><code>options(&quot;httr_oob_default&quot; = T)

cKey     &lt;- &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;
cSecret  &lt;- &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;

yahoo &lt;- httr::oauth_endpoint(authorize = &quot;https://api.login.yahoo.com/oauth2/request_auth&quot;
                              , access = &quot;https://api.login.yahoo.com/oauth2/get_token&quot;
                              , base_url = &quot;https://fantasysports.yahooapis.com&quot;)

myapp &lt;- httr::oauth_app(&quot;yahoo&quot;, key=cKey, secret = cSecret,redirect_uri = &quot;oob&quot;)</code></pre>
<p>Of course, I have not shared my <code>key</code> and <code>secret</code>. This specific code will not work for you, but if you use yours, it should work fine.</p>
<p>The next code chunk will open a browser. You’ll have to grant it access and then copy and paste your passcode where I have written <code>passcode</code> in order to create your token.</p>
<pre class="r"><code>httr::BROWSE(httr::oauth2.0_authorize_url(yahoo, myapp, scope=&quot;fspt-r&quot;
                                          , redirect_uri = myapp$redirect_uri))

passcode = &quot;xxxxxxx&quot;

yahoo_token &lt;- httr::oauth2.0_access_token(yahoo,myapp,code=passcode)
save(yahoo_token,file=&quot;yahoo_token.Rdata&quot;)</code></pre>
<p>Full disclaimer here. I have yet to figure out how to access this saved code. I have been recreating a passcode every time I run this. I would love it if someone could show me how to do this.</p>
<p>The next step is to determine your <code>game key</code>. You need this <code>game key</code> to tell Yahoo what type of information you will request later on. If this doesn’t make sense, go with me now and hopefully it will later.</p>
<pre class="r"><code>standings_page &lt;- GET(&quot;https://fantasysports.yahooapis.com/fantasy/v2/game/nfl&quot;,
                      add_headers(Authorization=paste0(&quot;Bearer &quot;, yahoo_token$access_token)))
XMLstandings&lt;- content(standings_page, as=&quot;parsed&quot;, encoding=&quot;utf-8&quot;)
doc&lt;-xmlTreeParse(XMLstandings, useInternal=TRUE)
myList&lt;- xmlToList(xmlRoot(doc))
game_key = myList$game$game_key
game_key</code></pre>
<pre><code>## [1] &quot;380&quot;</code></pre>
<p>My <code>game key</code> is 380. I do not know if this will be yours. This very well may be the same <code>game key</code> for every Yahoo fantasy football league, but it’s worth checking just in case.</p>
<p>Now we’ll build our URL to extract the information we want from the Yahoo API.</p>
<p>Your baseURL will be the same as mine.</p>
<p>You’ll need your leagueID. You can find this from your Yahoo Fantasy Football page. Make sure your league is a public league.</p>
<p>You’ll also need what I called a <code>tag</code>. The example that I used are the scoreboard for week 1. Of course, you can choose any week. There are other options too that include <code>metadata</code>, <code>settings</code>,<code>teams</code>, and <code>players</code> among others. You can get a full list <a href="https://developer.yahoo.com/fantasysports/guide/league-resource.html">here</a>.</p>
<pre class="r"><code>baseURL     &lt;- &quot;https://fantasysports.yahooapis.com/fantasy/v2/league/&quot;

leagueID    &lt;- &quot;1244633&quot;

tag &lt;- &quot;/scoreboard;week=1&quot;

standingsURL &lt;-paste0(baseURL,game_key,&quot;.l.&quot;,leagueID,tag)
standings_page &lt;- GET(standingsURL, add_headers(Authorization = paste0(&quot;Bearer &quot;, yahoo_token$access_token)))
XMLstandings &lt;- content(standings_page, as = &quot;parsed&quot;, encoding = &quot;utf-8&quot;)

doc &lt;- xmlTreeParse(XMLstandings, useInternal = TRUE)
myList &lt;- xmlToList(xmlRoot(doc))</code></pre>
<p>Lets look below at everything this list offers.</p>
<pre class="r"><code>names(myList$league)</code></pre>
<pre><code>##  [1] &quot;league_key&quot;                &quot;league_id&quot;                
##  [3] &quot;name&quot;                      &quot;url&quot;                      
##  [5] &quot;logo_url&quot;                  &quot;draft_status&quot;             
##  [7] &quot;num_teams&quot;                 &quot;edit_key&quot;                 
##  [9] &quot;weekly_deadline&quot;           &quot;league_update_timestamp&quot;  
## [11] &quot;scoring_type&quot;              &quot;league_type&quot;              
## [13] &quot;renew&quot;                     &quot;renewed&quot;                  
## [15] &quot;iris_group_chat_id&quot;        &quot;allow_add_to_dl_extra_pos&quot;
## [17] &quot;is_pro_league&quot;             &quot;is_cash_league&quot;           
## [19] &quot;current_week&quot;              &quot;start_week&quot;               
## [21] &quot;start_date&quot;                &quot;end_week&quot;                 
## [23] &quot;end_date&quot;                  &quot;is_finished&quot;              
## [25] &quot;game_code&quot;                 &quot;season&quot;                   
## [27] &quot;scoreboard&quot;</code></pre>
<p>Now that we know we can get this information, lets set up a loop to extract the entire season.</p>
<pre class="r"><code>baseURL     &lt;- &quot;https://fantasysports.yahooapis.com/fantasy/v2/league/&quot;
leagueID    &lt;- &quot;1244633&quot;
tag &lt;- &quot;/scoreboard;week=1&quot;

yahoodf = data.frame(
  TeamA = NA,
  TeamB = NA,
  PointsA = NA,
  PointsB = NA,
  week = NA
)

for (j in 1:14) {
  standingsURL &lt;-paste0(baseURL,game_key,&quot;.l.&quot;,leagueID,tag)
  standings_page &lt;- GET(standingsURL,add_headers(Authorization = paste0(&quot;Bearer &quot;, yahoo_token$access_token)))
  XMLstandings &lt;- content(standings_page, as = &quot;parsed&quot;, encoding = &quot;utf-8&quot;)
  
  doc &lt;- xmlTreeParse(XMLstandings, useInternal = TRUE)
  myList &lt;- xmlToList(xmlRoot(doc))
  
  vec = NA
  for (i in 1:5) {
    TeamA = myList$league$scoreboard$matchups[i]$matchup$teams[1]$team$name
    TeamB = myList$league$scoreboard$matchups[i]$matchup$teams[2]$team$name
    PointsA = myList$league$scoreboard$matchups[i]$matchup$teams[1]$team$team_points$total
    PointsB = myList$league$scoreboard$matchups[i]$matchup$teams[2]$team$team_points$total
    
    vec = c(TeamA, TeamB, PointsA, PointsB, j)
    yahoodf = rbind(yahoodf, vec)
  }
}</code></pre>
<p>I’ll clean up the dataframe a little bit.</p>
<pre class="r"><code>yahoodf = yahoodf %&gt;% 
  filter(complete.cases(.)) %&gt;%
  mutate(PointsA = as.numeric(PointsA),PointsB = as.numeric(PointsB)) %&gt;%
  mutate(league = &quot;yahoo&quot;)</code></pre>
<p>Now that we’ve got the information extracted and cleaned, lets take a look at it.</p>
<pre class="r"><code>yahoodf %&gt;% data.table()</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   TeamA = col_character(),
##   TeamB = col_character(),
##   PointsA = col_double(),
##   PointsB = col_double(),
##   week = col_integer(),
##   league = col_character()
## )</code></pre>
<div id="htmlwidget-3" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-3">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77"],["Brady for President","Lights Kamara Action","Mauled Mentos","Bama","General Puddin Pants","Brady for President","Yo_soy_Fiesta!","Mauled Mentos","Bama","General Puddin Pants","Brady for President","Yo_soy_Fiesta!","Bama","General Puddin Pants","Stampeders","Brady for President","Yo_soy_Fiesta!","Lights Kamara Action","General Puddin Pants","Stampeders","Brady for President","Yo_soy_Fiesta!","Lights Kamara Action","Stampeders","Baller's Ballers","Brady for President","Yo_soy_Fiesta!","Lights Kamara Action","Mauled Mentos","Baller's Ballers","Brady for President","Yo_soy_Fiesta!","Lights Kamara Action","Mauled Mentos","Last Manning Standin","Brady for President","Yo_soy_Fiesta!","Lights Kamara Action","Mauled Mentos","Bama","Brady for President","Yo_soy_Fiesta!","Lights Kamara Action","Mauled Mentos","Bama","Brady for President","Lights Kamara Action","Mauled Mentos","Bama","General Puddin Pants","Brady for President","Yo_soy_Fiesta!","Mauled Mentos","Bama","General Puddin Pants","Brady for President","Yo_soy_Fiesta!","Bama","General Puddin Pants","Stampeders","Brady for President","Yo_soy_Fiesta!","Lights Kamara Action","General Puddin Pants","Stampeders","Brady for President","Yo_soy_Fiesta!","Bama","General Puddin Pants","Brady for President","Yo_soy_Fiesta!","Bama","Stampeders","Brady for President","Yo_soy_Fiesta!","Lights Kamara Action","Mauled Mentos"],["Yo_soy_Fiesta!","Last Manning Standin","Baller's Ballers","Stampeders","The Big Gronkowski","Lights Kamara Action","The Big Gronkowski","Last Manning Standin","Baller's Ballers","Stampeders","Mauled Mentos","Lights Kamara Action","Last Manning Standin","Baller's Ballers","The Big Gronkowski","Bama","Mauled Mentos","The Big Gronkowski","Last Manning Standin","Baller's Ballers","General Puddin Pants","Bama","Mauled Mentos","Last Manning Standin","The Big Gronkowski","Stampeders","General Puddin Pants","Bama","The Big Gronkowski","Last Manning Standin","Baller's Ballers","Stampeders","General Puddin Pants","Bama","The Big Gronkowski","Last Manning Standin","Baller's Ballers","Stampeders","General Puddin Pants","The Big Gronkowski","The Big Gronkowski","Last Manning Standin","Baller's Ballers","Stampeders","General Puddin Pants","Yo_soy_Fiesta!","Last Manning Standin","Baller's Ballers","Stampeders","The Big Gronkowski","Lights Kamara Action","The Big Gronkowski","Last Manning Standin","Baller's Ballers","Stampeders","Mauled Mentos","Lights Kamara Action","Last Manning Standin","Baller's Ballers","The Big Gronkowski","Bama","Mauled Mentos","The Big Gronkowski","Last Manning Standin","Baller's Ballers","Lights Kamara Action","Mauled Mentos","Baller's Ballers","Stampeders","Mauled Mentos","Lights Kamara Action","General Puddin Pants","Baller's Ballers","Baller's Ballers","Bama","General Puddin Pants","Stampeders"],[101.24,139.36,141.84,124.34,100.22,155.8,170.28,79.88,123.68,122.54,137.06,111.22,105.18,123.88,87.42,133.96,127.16,87.38,121.18,127.06,142.72,143.1,129.52,86.6,114.46,124.38,117.16,135.68,96,107.28,112.12,142.3,116.38,142.26,120.84,145.02,92.08,89.3,96.12,156.56,182.18,108.4,102.04,102.78,87.16,127.5,152.2,182.12,96.54,113.34,143.82,97.24,147.18,130.48,86.3,156.1,149.28,137.72,61.96,112.88,161.8,96.94,99.88,118.4,91.24,120.28,114.08,103.02,75.68,116.82,76.5,92.08,87.26,146.22,128,116.94,123.08],[116.1,116.46,108.06,124.28,89.24,91.74,91.54,98,112.74,102.26,108.2,111.14,98.54,107.56,81.34,127.38,124.52,127.52,94.7,135,91.32,117.3,102.98,96.62,81.58,97.3,125.78,154.44,119.1,73.42,127.44,80.86,162.7,73.54,128.04,89.76,125.1,107.96,107.32,129.94,106.46,47.46,162.74,120.36,119.2,129.22,93.2,85.22,114.8,123.26,145.42,125.48,88.4,107.82,105.44,119.34,80.84,98.28,108.46,111.82,100.72,129.9,71.8,103.14,69.78,86.64,126.5,106.8,114.92,89.44,91.16,101.08,135.82,117.46,98.48,63.14,98.86],[1,1,1,1,1,2,2,2,2,2,3,3,3,3,3,4,4,4,4,4,5,5,5,5,5,6,6,6,6,6,7,7,7,7,7,8,8,8,8,8,9,9,9,9,9,10,10,10,10,10,11,11,11,11,11,12,12,12,12,12,13,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16],["yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo","yahoo"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>TeamA<\/th>\n      <th>TeamB<\/th>\n      <th>PointsA<\/th>\n      <th>PointsB<\/th>\n      <th>week<\/th>\n      <th>league<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[3,4,5]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</article>
    <footer class="post-footer">
      
      <ul class="post-tags">
        
          <li><a href="/tags/army-math"><span class="tag">Army Math</span></a></li>
        
          <li><a href="/tags/beatnavy"><span class="tag">Beatnavy</span></a></li>
        
          <li><a href="/tags/espn-api"><span class="tag">ESPN API</span></a></li>
        
          <li><a href="/tags/fantasy-football"><span class="tag">Fantasy Football</span></a></li>
        
          <li><a href="/tags/yahoo-api"><span class="tag">YAHOO API</span></a></li>
        
      </ul>
      
      <p class="post-copyright">
        © This post is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License，please give source if you likes to quote or reproduce.This post was published <strong>298</strong> days ago, content in the post may be inaccurate, even wrong now, please take risk yourself.
      </p>
    </footer>
    
      <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "dusty-turner" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      
    
  </section>
  <footer class="site-footer">
  <p>© 2017-2019 Dusty Turner</p>
  <p>Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> with theme <a href="https://github.com/laozhu/hugo-nuo" target="_blank">Nuo</a>.</p>
  
</footer>



<script async src="//cdn.bootcss.com/video.js/6.2.8/alt/video.novtt.min.js"></script>
<script async src="//cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      displayMath: [['$$','$$'], ['\[','\]']],
      processEscapes: true,
      processEnvironments: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      TeX: { equationNumbers: { autoNumber: "AMS" },
      extensions: ["AMSmath.js", "AMSsymbols.js"] }
    }
  });
</script>
<script type="text/x-mathjax-config">
  // Fix <code> tags after MathJax finishes running. This is a
  // hack to overcome a shortcoming of Markdown. Discussion at
  // https://github.com/mojombo/jekyll/issues/199
  MathJax.Hub.Queue(() => {
    MathJax.Hub.getAllJax().map(v => v.SourceElement().parentNode.className += ' has-jax');
  });
</script>

<script src="/js/bundle.js"></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-109926409-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>





  </body>
</html>
