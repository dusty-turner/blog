<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Data Manipulation | Intermediate R</title>
  <meta name="description" content="2 Data Manipulation | Intermediate R" />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Data Manipulation | Intermediate R" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Data Manipulation | Intermediate R" />
  
  
  

<meta name="author" content="MAJ Dusty Turner" />


<meta name="date" content="2020-06-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="3-data-visualization.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href = "/">Tutorial Home</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Class Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#expectations"><i class="fa fa-check"></i><b>1.1</b> Expectations</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#class-introductions"><i class="fa fa-check"></i><b>1.2</b> Class Introductions</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#instructor-introduction"><i class="fa fa-check"></i><b>1.3</b> Instructor Introduction</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#course-intent"><i class="fa fa-check"></i><b>1.4</b> Course Intent</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#get-course-documents"><i class="fa fa-check"></i><b>1.5</b> Get Course Documents</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-data-manipulation.html"><a href="2-data-manipulation.html"><i class="fa fa-check"></i><b>2</b> Data Manipulation</a><ul>
<li class="chapter" data-level="2.1" data-path="2-data-manipulation.html"><a href="2-data-manipulation.html#read-in-data"><i class="fa fa-check"></i><b>2.1</b> Read in Data</a></li>
<li class="chapter" data-level="2.2" data-path="2-data-manipulation.html"><a href="2-data-manipulation.html#analysis-with-dplyr"><i class="fa fa-check"></i><b>2.2</b> Analysis with <code>dplyr</code></a></li>
<li class="chapter" data-level="2.3" data-path="2-data-manipulation.html"><a href="2-data-manipulation.html#joins"><i class="fa fa-check"></i><b>2.3</b> Joins</a></li>
<li class="chapter" data-level="2.4" data-path="2-data-manipulation.html"><a href="2-data-manipulation.html#other-dplyr-tricks"><i class="fa fa-check"></i><b>2.4</b> Other dplyr Tricks</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-data-visualization.html"><a href="3-data-visualization.html"><i class="fa fa-check"></i><b>3</b> Data Visualization</a><ul>
<li class="chapter" data-level="3.1" data-path="3-data-visualization.html"><a href="3-data-visualization.html#bar-chart"><i class="fa fa-check"></i><b>3.1</b> Bar Chart</a></li>
<li class="chapter" data-level="" data-path="3-data-visualization.html"><a href="3-data-visualization.html#scatter-plot"><i class="fa fa-check"></i>Scatter Plot</a></li>
<li class="chapter" data-level="3.2" data-path="3-data-visualization.html"><a href="3-data-visualization.html#animation"><i class="fa fa-check"></i><b>3.2</b> Animation</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-data-modeling.html"><a href="4-data-modeling.html"><i class="fa fa-check"></i><b>4</b> Data Modeling</a><ul>
<li class="chapter" data-level="4.1" data-path="4-data-modeling.html"><a href="4-data-modeling.html#load-packages"><i class="fa fa-check"></i><b>4.1</b> Load Packages</a></li>
<li class="chapter" data-level="4.2" data-path="4-data-modeling.html"><a href="4-data-modeling.html#read-data"><i class="fa fa-check"></i><b>4.2</b> Read Data</a></li>
<li class="chapter" data-level="4.3" data-path="4-data-modeling.html"><a href="4-data-modeling.html#data-exploration"><i class="fa fa-check"></i><b>4.3</b> Data Exploration</a></li>
<li class="chapter" data-level="4.4" data-path="4-data-modeling.html"><a href="4-data-modeling.html#split-data-testtrain"><i class="fa fa-check"></i><b>4.4</b> Split Data test/train</a></li>
<li class="chapter" data-level="4.5" data-path="4-data-modeling.html"><a href="4-data-modeling.html#preprocess-data"><i class="fa fa-check"></i><b>4.5</b> Preprocess Data</a></li>
<li class="chapter" data-level="4.6" data-path="4-data-modeling.html"><a href="4-data-modeling.html#apply-preprocessing"><i class="fa fa-check"></i><b>4.6</b> Apply Preprocessing</a></li>
<li class="chapter" data-level="4.7" data-path="4-data-modeling.html"><a href="4-data-modeling.html#prepare-cross-validation"><i class="fa fa-check"></i><b>4.7</b> Prepare Cross Validation</a></li>
<li class="chapter" data-level="4.8" data-path="4-data-modeling.html"><a href="4-data-modeling.html#specify-models"><i class="fa fa-check"></i><b>4.8</b> Specify Models</a></li>
<li class="chapter" data-level="4.9" data-path="4-data-modeling.html"><a href="4-data-modeling.html#create-grid-of-parameters-to-validate-over"><i class="fa fa-check"></i><b>4.9</b> Create Grid of Parameters to Validate Over</a></li>
<li class="chapter" data-level="4.10" data-path="4-data-modeling.html"><a href="4-data-modeling.html#execute-cross-validation"><i class="fa fa-check"></i><b>4.10</b> Execute Cross Validation</a></li>
<li class="chapter" data-level="4.11" data-path="4-data-modeling.html"><a href="4-data-modeling.html#select-best-parameters"><i class="fa fa-check"></i><b>4.11</b> Select Best Parameters</a></li>
<li class="chapter" data-level="4.12" data-path="4-data-modeling.html"><a href="4-data-modeling.html#save-best-paramenters"><i class="fa fa-check"></i><b>4.12</b> Save Best Paramenters</a></li>
<li class="chapter" data-level="4.13" data-path="4-data-modeling.html"><a href="4-data-modeling.html#compare-models"><i class="fa fa-check"></i><b>4.13</b> Compare Models</a></li>
<li class="chapter" data-level="4.14" data-path="4-data-modeling.html"><a href="4-data-modeling.html#run-best-model-on-all-data"><i class="fa fa-check"></i><b>4.14</b> Run Best Model on All Data</a></li>
<li class="chapter" data-level="4.15" data-path="4-data-modeling.html"><a href="4-data-modeling.html#run-model-on-new-data"><i class="fa fa-check"></i><b>4.15</b> Run Model on New Data</a></li>
<li class="chapter" data-level="4.16" data-path="4-data-modeling.html"><a href="4-data-modeling.html#variable-importance"><i class="fa fa-check"></i><b>4.16</b> Variable Importance</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Intermediate R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-manipulation" class="section level1">
<h1><span class="header-section-number">2</span> Data Manipulation</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="2-data-manipulation.html#cb1-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="2-data-manipulation.html#cb1-2"></a><span class="kw">library</span>(tidymodels)</span>
<span id="cb1-3"><a href="2-data-manipulation.html#cb1-3"></a><span class="kw">library</span>(janitor)</span></code></pre></div>
<div id="read-in-data" class="section level2">
<h2><span class="header-section-number">2.1</span> Read in Data</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="2-data-manipulation.html#cb2-1"></a><span class="kw">read_csv</span>(<span class="st">&quot;Batting.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   .default = col_double(),
##   playerID = col_character(),
##   teamID = col_character(),
##   lgID = col_character(),
##   SF = col_logical(),
##   GIDP = col_logical()
## )</code></pre>
<pre><code>## See spec(...) for full column specifications.</code></pre>
<pre><code>## Warning: 45441 parsing failures.
##   row  col           expected actual          file
## 25015 GIDP 1/0/T/F/TRUE/FALSE     2  &#39;Batting.csv&#39;
## 25016 GIDP 1/0/T/F/TRUE/FALSE     10 &#39;Batting.csv&#39;
## 25018 GIDP 1/0/T/F/TRUE/FALSE     4  &#39;Batting.csv&#39;
## 25028 GIDP 1/0/T/F/TRUE/FALSE     8  &#39;Batting.csv&#39;
## 25030 GIDP 1/0/T/F/TRUE/FALSE     3  &#39;Batting.csv&#39;
## ..... .... .................. ...... .............
## See problems(...) for more details.</code></pre>
<pre><code>## # A tibble: 102,816 x 22
##    playerID yearID stint teamID lgID      G    AB     R     H  `2B`  `3B`    HR   RBI
##    &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 abercda~   1871     1 TRO    &lt;NA&gt;      1     4     0     0     0     0     0     0
##  2 addybo01   1871     1 RC1    &lt;NA&gt;     25   118    30    32     6     0     0    13
##  3 allisar~   1871     1 CL1    &lt;NA&gt;     29   137    28    40     4     5     0    19
##  4 allisdo~   1871     1 WS3    &lt;NA&gt;     27   133    28    44    10     2     2    27
##  5 ansonca~   1871     1 RC1    &lt;NA&gt;     25   120    29    39    11     3     0    16
##  6 armstbo~   1871     1 FW1    &lt;NA&gt;     12    49     9    11     2     1     0     5
##  7 barkeal~   1871     1 RC1    &lt;NA&gt;      1     4     0     1     0     0     0     2
##  8 barnero~   1871     1 BS1    &lt;NA&gt;     31   157    66    63    10     9     0    34
##  9 barrebi~   1871     1 FW1    &lt;NA&gt;      1     5     1     1     1     0     0     1
## 10 barrofr~   1871     1 BS1    &lt;NA&gt;     18    86    13    13     2     1     0    11
## # ... with 102,806 more rows, and 9 more variables: SB &lt;dbl&gt;, CS &lt;dbl&gt;, BB &lt;dbl&gt;,
## #   SO &lt;dbl&gt;, IBB &lt;dbl&gt;, HBP &lt;dbl&gt;, SH &lt;dbl&gt;, SF &lt;lgl&gt;, GIDP &lt;lgl&gt;</code></pre>
<div id="fix-read-in-errors" class="section level3 unnumbered">
<h3>Fix Read In Errors</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="2-data-manipulation.html#cb7-1"></a><span class="kw">read_csv</span>(<span class="st">&quot;Batting.csv&quot;</span>, <span class="dt">col_types =</span> <span class="kw">cols</span>(<span class="dt">SF =</span> <span class="kw">col_double</span>(), <span class="dt">GIDP =</span> <span class="kw">col_double</span>()))</span></code></pre></div>
<pre><code>## # A tibble: 102,816 x 22
##    playerID yearID stint teamID lgID      G    AB     R     H  `2B`  `3B`    HR   RBI
##    &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 abercda~   1871     1 TRO    &lt;NA&gt;      1     4     0     0     0     0     0     0
##  2 addybo01   1871     1 RC1    &lt;NA&gt;     25   118    30    32     6     0     0    13
##  3 allisar~   1871     1 CL1    &lt;NA&gt;     29   137    28    40     4     5     0    19
##  4 allisdo~   1871     1 WS3    &lt;NA&gt;     27   133    28    44    10     2     2    27
##  5 ansonca~   1871     1 RC1    &lt;NA&gt;     25   120    29    39    11     3     0    16
##  6 armstbo~   1871     1 FW1    &lt;NA&gt;     12    49     9    11     2     1     0     5
##  7 barkeal~   1871     1 RC1    &lt;NA&gt;      1     4     0     1     0     0     0     2
##  8 barnero~   1871     1 BS1    &lt;NA&gt;     31   157    66    63    10     9     0    34
##  9 barrebi~   1871     1 FW1    &lt;NA&gt;      1     5     1     1     1     0     0     1
## 10 barrofr~   1871     1 BS1    &lt;NA&gt;     18    86    13    13     2     1     0    11
## # ... with 102,806 more rows, and 9 more variables: SB &lt;dbl&gt;, CS &lt;dbl&gt;, BB &lt;dbl&gt;,
## #   SO &lt;dbl&gt;, IBB &lt;dbl&gt;, HBP &lt;dbl&gt;, SH &lt;dbl&gt;, SF &lt;dbl&gt;, GIDP &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="2-data-manipulation.html#cb9-1"></a><span class="kw">read_csv</span>(<span class="st">&quot;Batting.csv&quot;</span>, <span class="dt">guess_max =</span> <span class="dv">10000</span>)</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   .default = col_double(),
##   playerID = col_character(),
##   teamID = col_character(),
##   lgID = col_character()
## )</code></pre>
<pre><code>## See spec(...) for full column specifications.</code></pre>
<pre><code>## # A tibble: 102,816 x 22
##    playerID yearID stint teamID lgID      G    AB     R     H  `2B`  `3B`    HR   RBI
##    &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 abercda~   1871     1 TRO    &lt;NA&gt;      1     4     0     0     0     0     0     0
##  2 addybo01   1871     1 RC1    &lt;NA&gt;     25   118    30    32     6     0     0    13
##  3 allisar~   1871     1 CL1    &lt;NA&gt;     29   137    28    40     4     5     0    19
##  4 allisdo~   1871     1 WS3    &lt;NA&gt;     27   133    28    44    10     2     2    27
##  5 ansonca~   1871     1 RC1    &lt;NA&gt;     25   120    29    39    11     3     0    16
##  6 armstbo~   1871     1 FW1    &lt;NA&gt;     12    49     9    11     2     1     0     5
##  7 barkeal~   1871     1 RC1    &lt;NA&gt;      1     4     0     1     0     0     0     2
##  8 barnero~   1871     1 BS1    &lt;NA&gt;     31   157    66    63    10     9     0    34
##  9 barrebi~   1871     1 FW1    &lt;NA&gt;      1     5     1     1     1     0     0     1
## 10 barrofr~   1871     1 BS1    &lt;NA&gt;     18    86    13    13     2     1     0    11
## # ... with 102,806 more rows, and 9 more variables: SB &lt;dbl&gt;, CS &lt;dbl&gt;, BB &lt;dbl&gt;,
## #   SO &lt;dbl&gt;, IBB &lt;dbl&gt;, HBP &lt;dbl&gt;, SH &lt;dbl&gt;, SF &lt;dbl&gt;, GIDP &lt;dbl&gt;</code></pre>
</div>
<div id="clean-column-names" class="section level3 unnumbered">
<h3>Clean Column Names</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="2-data-manipulation.html#cb13-1"></a><span class="kw">read_csv</span>(<span class="st">&quot;Batting.csv&quot;</span>, <span class="dt">col_types =</span> <span class="kw">cols</span>(<span class="dt">SF =</span> <span class="kw">col_double</span>(), <span class="dt">GIDP =</span> <span class="kw">col_double</span>())) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb13-2"><a href="2-data-manipulation.html#cb13-2"></a><span class="st">  </span><span class="kw">clean_names</span>()</span></code></pre></div>
<pre><code>## # A tibble: 102,816 x 22
##    player_id year_id stint team_id lg_id     g    ab     r     h   x2b   x3b    hr
##    &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 abercda01    1871     1 TRO     &lt;NA&gt;      1     4     0     0     0     0     0
##  2 addybo01     1871     1 RC1     &lt;NA&gt;     25   118    30    32     6     0     0
##  3 allisar01    1871     1 CL1     &lt;NA&gt;     29   137    28    40     4     5     0
##  4 allisdo01    1871     1 WS3     &lt;NA&gt;     27   133    28    44    10     2     2
##  5 ansonca01    1871     1 RC1     &lt;NA&gt;     25   120    29    39    11     3     0
##  6 armstbo01    1871     1 FW1     &lt;NA&gt;     12    49     9    11     2     1     0
##  7 barkeal01    1871     1 RC1     &lt;NA&gt;      1     4     0     1     0     0     0
##  8 barnero01    1871     1 BS1     &lt;NA&gt;     31   157    66    63    10     9     0
##  9 barrebi01    1871     1 FW1     &lt;NA&gt;      1     5     1     1     1     0     0
## 10 barrofr01    1871     1 BS1     &lt;NA&gt;     18    86    13    13     2     1     0
## # ... with 102,806 more rows, and 10 more variables: rbi &lt;dbl&gt;, sb &lt;dbl&gt;, cs &lt;dbl&gt;,
## #   bb &lt;dbl&gt;, so &lt;dbl&gt;, ibb &lt;dbl&gt;, hbp &lt;dbl&gt;, sh &lt;dbl&gt;, sf &lt;dbl&gt;, gidp &lt;dbl&gt;</code></pre>
</div>
</div>
<div id="analysis-with-dplyr" class="section level2">
<h2><span class="header-section-number">2.2</span> Analysis with <code>dplyr</code></h2>
<p>Who has the highest career slugging percentage</p>
<div id="select" class="section level3 unnumbered">
<h3>Select</h3>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="2-data-manipulation.html#cb15-1"></a>data =<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;Batting.csv&quot;</span>, <span class="dt">col_types =</span> <span class="kw">cols</span>(<span class="dt">SF =</span> <span class="kw">col_double</span>(), <span class="dt">GIDP =</span> <span class="kw">col_double</span>())) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb15-2"><a href="2-data-manipulation.html#cb15-2"></a><span class="st">  </span><span class="kw">clean_names</span>()</span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="2-data-manipulation.html#cb16-1"></a>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb16-2"><a href="2-data-manipulation.html#cb16-2"></a><span class="st">  </span><span class="kw">select</span>(player_id,year_id,h,x2b,x3b,hr,ab, g)</span></code></pre></div>
<pre><code>## # A tibble: 102,816 x 8
##    player_id year_id     h   x2b   x3b    hr    ab     g
##    &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 abercda01    1871     0     0     0     0     4     1
##  2 addybo01     1871    32     6     0     0   118    25
##  3 allisar01    1871    40     4     5     0   137    29
##  4 allisdo01    1871    44    10     2     2   133    27
##  5 ansonca01    1871    39    11     3     0   120    25
##  6 armstbo01    1871    11     2     1     0    49    12
##  7 barkeal01    1871     1     0     0     0     4     1
##  8 barnero01    1871    63    10     9     0   157    31
##  9 barrebi01    1871     1     1     0     0     5     1
## 10 barrofr01    1871    13     2     1     0    86    18
## # ... with 102,806 more rows</code></pre>
</div>
<div id="group_by" class="section level3 unnumbered">
<h3>Group_by</h3>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="2-data-manipulation.html#cb18-1"></a>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb18-2"><a href="2-data-manipulation.html#cb18-2"></a><span class="st">  </span><span class="kw">select</span>(player_id,year_id,h,x2b,x3b,hr,ab, g) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb18-3"><a href="2-data-manipulation.html#cb18-3"></a><span class="st">  </span><span class="kw">group_by</span>(player_id)</span></code></pre></div>
<pre><code>## # A tibble: 102,816 x 8
## # Groups:   player_id [18,915]
##    player_id year_id     h   x2b   x3b    hr    ab     g
##    &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 abercda01    1871     0     0     0     0     4     1
##  2 addybo01     1871    32     6     0     0   118    25
##  3 allisar01    1871    40     4     5     0   137    29
##  4 allisdo01    1871    44    10     2     2   133    27
##  5 ansonca01    1871    39    11     3     0   120    25
##  6 armstbo01    1871    11     2     1     0    49    12
##  7 barkeal01    1871     1     0     0     0     4     1
##  8 barnero01    1871    63    10     9     0   157    31
##  9 barrebi01    1871     1     1     0     0     5     1
## 10 barrofr01    1871    13     2     1     0    86    18
## # ... with 102,806 more rows</code></pre>
</div>
<div id="summarise" class="section level3 unnumbered">
<h3>Summarise</h3>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="2-data-manipulation.html#cb20-1"></a>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb20-2"><a href="2-data-manipulation.html#cb20-2"></a><span class="st">  </span><span class="kw">select</span>(player_id,year_id,h,x2b,x3b,hr,ab, g) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb20-3"><a href="2-data-manipulation.html#cb20-3"></a><span class="st">  </span><span class="kw">group_by</span>(player_id) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb20-4"><a href="2-data-manipulation.html#cb20-4"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">h =</span> <span class="kw">sum</span>(h), </span>
<span id="cb20-5"><a href="2-data-manipulation.html#cb20-5"></a>            <span class="dt">x2b =</span> <span class="kw">sum</span>(x2b),</span>
<span id="cb20-6"><a href="2-data-manipulation.html#cb20-6"></a>            <span class="dt">x3b =</span> <span class="kw">sum</span>(x3b),</span>
<span id="cb20-7"><a href="2-data-manipulation.html#cb20-7"></a>            <span class="dt">hr =</span> <span class="kw">sum</span>(hr),</span>
<span id="cb20-8"><a href="2-data-manipulation.html#cb20-8"></a>            <span class="dt">ab =</span> <span class="kw">sum</span>(ab),</span>
<span id="cb20-9"><a href="2-data-manipulation.html#cb20-9"></a>            <span class="dt">g =</span> <span class="kw">sum</span>(g)) </span></code></pre></div>
<pre><code>## # A tibble: 18,915 x 7
##    player_id     h   x2b   x3b    hr    ab     g
##    &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 aardsda01     0     0     0     0     4   331
##  2 aaronha01  3771   624    98   755 12364  3298
##  3 aaronto01   216    42     6    13   944   437
##  4 aasedo01      0     0     0     0     5   448
##  5 abadan01      2     0     0     0    21    15
##  6 abadfe01      1     0     0     0     9   315
##  7 abadijo01    11     0     0     0    49    12
##  8 abbated01   772    99    43    11  3044   855
##  9 abbeybe01    38     3     3     0   225    79
## 10 abbeych01   492    67    46    19  1751   451
## # ... with 18,905 more rows</code></pre>
</div>
<div id="filter" class="section level3 unnumbered">
<h3>Filter</h3>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="2-data-manipulation.html#cb22-1"></a>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb22-2"><a href="2-data-manipulation.html#cb22-2"></a><span class="st">  </span><span class="kw">select</span>(player_id,year_id,h,x2b,x3b,hr,ab, g) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb22-3"><a href="2-data-manipulation.html#cb22-3"></a><span class="st">  </span><span class="kw">group_by</span>(player_id) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb22-4"><a href="2-data-manipulation.html#cb22-4"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">h =</span> <span class="kw">sum</span>(h), </span>
<span id="cb22-5"><a href="2-data-manipulation.html#cb22-5"></a>            <span class="dt">x2b =</span> <span class="kw">sum</span>(x2b),</span>
<span id="cb22-6"><a href="2-data-manipulation.html#cb22-6"></a>            <span class="dt">x3b =</span> <span class="kw">sum</span>(x3b),</span>
<span id="cb22-7"><a href="2-data-manipulation.html#cb22-7"></a>            <span class="dt">hr =</span> <span class="kw">sum</span>(hr),</span>
<span id="cb22-8"><a href="2-data-manipulation.html#cb22-8"></a>            <span class="dt">ab =</span> <span class="kw">sum</span>(ab),</span>
<span id="cb22-9"><a href="2-data-manipulation.html#cb22-9"></a>            <span class="dt">g =</span> <span class="kw">sum</span>(g)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb22-10"><a href="2-data-manipulation.html#cb22-10"></a><span class="st">  </span><span class="kw">filter</span>(g<span class="op">&gt;</span><span class="dv">1000</span>) </span></code></pre></div>
<pre><code>## # A tibble: 1,564 x 7
##    player_id     h   x2b   x3b    hr    ab     g
##    &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 aaronha01  3771   624    98   755 12364  3298
##  2 abreubo01  2470   574    59   288  8480  2425
##  3 adairje01  1022   163    19    57  4019  1165
##  4 adamsbo03  1082   188    49    37  4019  1281
##  5 adamssp01  1588   249    48     9  5557  1424
##  6 adcocjo01  1832   295    35   336  6606  1959
##  7 ageeto01    999   170    27   130  3912  1129
##  8 ainsmed01   707   108    54    22  3048  1078
##  9 alfoned01  1532   282    18   146  5385  1506
## 10 alicelu01  1031   189    53    47  3971  1341
## # ... with 1,554 more rows</code></pre>
</div>
<div id="mutate" class="section level3 unnumbered">
<h3>Mutate</h3>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="2-data-manipulation.html#cb24-1"></a>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb24-2"><a href="2-data-manipulation.html#cb24-2"></a><span class="st">  </span><span class="kw">select</span>(player_id,year_id,h,x2b,x3b,hr,ab, g) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb24-3"><a href="2-data-manipulation.html#cb24-3"></a><span class="st">  </span><span class="kw">group_by</span>(player_id) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb24-4"><a href="2-data-manipulation.html#cb24-4"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">h =</span> <span class="kw">sum</span>(h), </span>
<span id="cb24-5"><a href="2-data-manipulation.html#cb24-5"></a>            <span class="dt">x2b =</span> <span class="kw">sum</span>(x2b),</span>
<span id="cb24-6"><a href="2-data-manipulation.html#cb24-6"></a>            <span class="dt">x3b =</span> <span class="kw">sum</span>(x3b),</span>
<span id="cb24-7"><a href="2-data-manipulation.html#cb24-7"></a>            <span class="dt">hr =</span> <span class="kw">sum</span>(hr),</span>
<span id="cb24-8"><a href="2-data-manipulation.html#cb24-8"></a>            <span class="dt">ab =</span> <span class="kw">sum</span>(ab),</span>
<span id="cb24-9"><a href="2-data-manipulation.html#cb24-9"></a>            <span class="dt">g =</span> <span class="kw">sum</span>(g)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb24-10"><a href="2-data-manipulation.html#cb24-10"></a><span class="st">  </span><span class="kw">filter</span>(g<span class="op">&gt;</span><span class="dv">1000</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb24-11"><a href="2-data-manipulation.html#cb24-11"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">slg =</span> (h <span class="op">+</span><span class="st"> </span>x2b <span class="op">+</span><span class="st"> </span><span class="dv">2</span><span class="op">*</span>x3b <span class="op">+</span><span class="st"> </span><span class="dv">3</span><span class="op">*</span>hr)<span class="op">/</span>ab)</span></code></pre></div>
<pre><code>## # A tibble: 1,564 x 8
##    player_id     h   x2b   x3b    hr    ab     g   slg
##    &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 aaronha01  3771   624    98   755 12364  3298 0.555
##  2 abreubo01  2470   574    59   288  8480  2425 0.475
##  3 adairje01  1022   163    19    57  4019  1165 0.347
##  4 adamsbo03  1082   188    49    37  4019  1281 0.368
##  5 adamssp01  1588   249    48     9  5557  1424 0.353
##  6 adcocjo01  1832   295    35   336  6606  1959 0.485
##  7 ageeto01    999   170    27   130  3912  1129 0.412
##  8 ainsmed01   707   108    54    22  3048  1078 0.324
##  9 alfoned01  1532   282    18   146  5385  1506 0.425
## 10 alicelu01  1031   189    53    47  3971  1341 0.369
## # ... with 1,554 more rows</code></pre>
</div>
<div id="arrange" class="section level3 unnumbered">
<h3>Arrange</h3>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="2-data-manipulation.html#cb26-1"></a>slgdata =<span class="st"> </span></span>
<span id="cb26-2"><a href="2-data-manipulation.html#cb26-2"></a>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb26-3"><a href="2-data-manipulation.html#cb26-3"></a><span class="st">  </span><span class="kw">select</span>(player_id,year_id,h,x2b,x3b,hr,ab, g) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb26-4"><a href="2-data-manipulation.html#cb26-4"></a><span class="st">  </span><span class="kw">group_by</span>(player_id) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb26-5"><a href="2-data-manipulation.html#cb26-5"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">h =</span> <span class="kw">sum</span>(h), </span>
<span id="cb26-6"><a href="2-data-manipulation.html#cb26-6"></a>            <span class="dt">x2b =</span> <span class="kw">sum</span>(x2b),</span>
<span id="cb26-7"><a href="2-data-manipulation.html#cb26-7"></a>            <span class="dt">x3b =</span> <span class="kw">sum</span>(x3b),</span>
<span id="cb26-8"><a href="2-data-manipulation.html#cb26-8"></a>            <span class="dt">hr =</span> <span class="kw">sum</span>(hr),</span>
<span id="cb26-9"><a href="2-data-manipulation.html#cb26-9"></a>            <span class="dt">ab =</span> <span class="kw">sum</span>(ab),</span>
<span id="cb26-10"><a href="2-data-manipulation.html#cb26-10"></a>            <span class="dt">g =</span> <span class="kw">sum</span>(g)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb26-11"><a href="2-data-manipulation.html#cb26-11"></a><span class="st">  </span><span class="kw">filter</span>(g<span class="op">&gt;</span><span class="dv">1000</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb26-12"><a href="2-data-manipulation.html#cb26-12"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">slg =</span> (h <span class="op">+</span><span class="st"> </span>x2b <span class="op">+</span><span class="st"> </span><span class="dv">2</span><span class="op">*</span>x3b <span class="op">+</span><span class="st"> </span><span class="dv">3</span><span class="op">*</span>hr)<span class="op">/</span>ab) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb26-13"><a href="2-data-manipulation.html#cb26-13"></a><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(slg))</span>
<span id="cb26-14"><a href="2-data-manipulation.html#cb26-14"></a></span>
<span id="cb26-15"><a href="2-data-manipulation.html#cb26-15"></a>slgdata</span></code></pre></div>
<pre><code>## # A tibble: 1,564 x 8
##    player_id     h   x2b   x3b    hr    ab     g   slg
##    &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 ruthba01   2873   506   136   714  8398  2503 0.690
##  2 willite01  2654   525    71   521  7706  2292 0.634
##  3 gehrilo01  2721   534   163   493  8001  2164 0.632
##  4 foxxji01   2646   458   125   534  8134  2317 0.609
##  5 bondsba01  2935   601    77   762  9847  2986 0.607
##  6 greenha01  1628   379    71   331  5193  1394 0.605
##  7 mcgwima01  1626   252     6   583  6187  1874 0.588
##  8 ramirma02  2574   547    20   555  8244  2302 0.585
##  9 dimagjo01  2214   389   131   361  6821  1736 0.579
## 10 hornsro01  2930   541   169   301  8173  2259 0.577
## # ... with 1,554 more rows</code></pre>
</div>
</div>
<div id="joins" class="section level2">
<h2><span class="header-section-number">2.3</span> Joins</h2>
<div id="player-id-data" class="section level3 unnumbered">
<h3>Player ID Data</h3>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="2-data-manipulation.html#cb28-1"></a><span class="kw">read_csv</span>(<span class="st">&quot;Master.csv&quot;</span>) </span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   .default = col_character(),
##   birthYear = col_double(),
##   birthMonth = col_double(),
##   birthDay = col_double(),
##   deathYear = col_double(),
##   deathMonth = col_double(),
##   deathDay = col_double(),
##   weight = col_double(),
##   height = col_double(),
##   debut = col_date(format = &quot;&quot;),
##   finalGame = col_date(format = &quot;&quot;)
## )</code></pre>
<pre><code>## See spec(...) for full column specifications.</code></pre>
<pre><code>## # A tibble: 19,105 x 24
##    playerID birthYear birthMonth birthDay birthCountry birthState birthCity deathYear
##    &lt;chr&gt;        &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;      &lt;chr&gt;         &lt;dbl&gt;
##  1 aardsda~      1981         12       27 USA          CO         Denver           NA
##  2 aaronha~      1934          2        5 USA          AL         Mobile           NA
##  3 aaronto~      1939          8        5 USA          AL         Mobile         1984
##  4 aasedo01      1954          9        8 USA          CA         Orange           NA
##  5 abadan01      1972          8       25 USA          FL         Palm Bea~        NA
##  6 abadfe01      1985         12       17 D.R.         La Romana  La Romana        NA
##  7 abadijo~      1850         11        4 USA          PA         Philadel~      1905
##  8 abbated~      1877          4       15 USA          PA         Latrobe        1957
##  9 abbeybe~      1869         11       11 USA          VT         Essex          1962
## 10 abbeych~      1866         10       14 USA          NE         Falls Ci~      1926
## # ... with 19,095 more rows, and 16 more variables: deathMonth &lt;dbl&gt;, deathDay &lt;dbl&gt;,
## #   deathCountry &lt;chr&gt;, deathState &lt;chr&gt;, deathCity &lt;chr&gt;, nameFirst &lt;chr&gt;,
## #   nameLast &lt;chr&gt;, nameGiven &lt;chr&gt;, weight &lt;dbl&gt;, height &lt;dbl&gt;, bats &lt;chr&gt;,
## #   throws &lt;chr&gt;, debut &lt;date&gt;, finalGame &lt;date&gt;, retroID &lt;chr&gt;, bbrefID &lt;chr&gt;</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="2-data-manipulation.html#cb32-1"></a><span class="kw">read_csv</span>(<span class="st">&quot;Master.csv&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb32-2"><a href="2-data-manipulation.html#cb32-2"></a><span class="st">  </span><span class="kw">select</span>(playerID, nameFirst, nameLast) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb32-3"><a href="2-data-manipulation.html#cb32-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">player =</span> <span class="kw">paste</span>(nameFirst,nameLast)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb32-4"><a href="2-data-manipulation.html#cb32-4"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">starts_with</span>(<span class="st">&quot;name&quot;</span>))</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   .default = col_character(),
##   birthYear = col_double(),
##   birthMonth = col_double(),
##   birthDay = col_double(),
##   deathYear = col_double(),
##   deathMonth = col_double(),
##   deathDay = col_double(),
##   weight = col_double(),
##   height = col_double(),
##   debut = col_date(format = &quot;&quot;),
##   finalGame = col_date(format = &quot;&quot;)
## )</code></pre>
<pre><code>## See spec(...) for full column specifications.</code></pre>
<pre><code>## # A tibble: 19,105 x 2
##    playerID  player        
##    &lt;chr&gt;     &lt;chr&gt;         
##  1 aardsda01 David Aardsma 
##  2 aaronha01 Hank Aaron    
##  3 aaronto01 Tommie Aaron  
##  4 aasedo01  Don Aase      
##  5 abadan01  Andy Abad     
##  6 abadfe01  Fernando Abad 
##  7 abadijo01 John Abadie   
##  8 abbated01 Ed Abbaticchio
##  9 abbeybe01 Bert Abbey    
## 10 abbeych01 Charlie Abbey 
## # ... with 19,095 more rows</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="2-data-manipulation.html#cb36-1"></a>master =<span class="st"> </span></span>
<span id="cb36-2"><a href="2-data-manipulation.html#cb36-2"></a><span class="kw">read_csv</span>(<span class="st">&quot;Master.csv&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb36-3"><a href="2-data-manipulation.html#cb36-3"></a><span class="st">  </span><span class="kw">select</span>(playerID, nameFirst, nameLast) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb36-4"><a href="2-data-manipulation.html#cb36-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">player =</span> <span class="kw">paste</span>(nameFirst,nameLast)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb36-5"><a href="2-data-manipulation.html#cb36-5"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">starts_with</span>(<span class="st">&quot;name&quot;</span>))</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   .default = col_character(),
##   birthYear = col_double(),
##   birthMonth = col_double(),
##   birthDay = col_double(),
##   deathYear = col_double(),
##   deathMonth = col_double(),
##   deathDay = col_double(),
##   weight = col_double(),
##   height = col_double(),
##   debut = col_date(format = &quot;&quot;),
##   finalGame = col_date(format = &quot;&quot;)
## )</code></pre>
<pre><code>## See spec(...) for full column specifications.</code></pre>
</div>
<div id="join-the-data" class="section level3 unnumbered">
<h3>Join the Data</h3>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="2-data-manipulation.html#cb39-1"></a>slgdata <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb39-2"><a href="2-data-manipulation.html#cb39-2"></a><span class="st">  </span><span class="kw">left_join</span>(master, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;player_id&quot;</span> =<span class="st"> &quot;playerID&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 1,564 x 9
##    player_id     h   x2b   x3b    hr    ab     g   slg player        
##    &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;         
##  1 ruthba01   2873   506   136   714  8398  2503 0.690 Babe Ruth     
##  2 willite01  2654   525    71   521  7706  2292 0.634 Ted Williams  
##  3 gehrilo01  2721   534   163   493  8001  2164 0.632 Lou Gehrig    
##  4 foxxji01   2646   458   125   534  8134  2317 0.609 Jimmie Foxx   
##  5 bondsba01  2935   601    77   762  9847  2986 0.607 Barry Bonds   
##  6 greenha01  1628   379    71   331  5193  1394 0.605 Hank Greenberg
##  7 mcgwima01  1626   252     6   583  6187  1874 0.588 Mark McGwire  
##  8 ramirma02  2574   547    20   555  8244  2302 0.585 Manny Ramirez 
##  9 dimagjo01  2214   389   131   361  6821  1736 0.579 Joe DiMaggio  
## 10 hornsro01  2930   541   169   301  8173  2259 0.577 Rogers Hornsby
## # ... with 1,554 more rows</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="2-data-manipulation.html#cb41-1"></a>slgname =<span class="st"> </span></span>
<span id="cb41-2"><a href="2-data-manipulation.html#cb41-2"></a>slgdata <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb41-3"><a href="2-data-manipulation.html#cb41-3"></a><span class="st">  </span><span class="kw">left_join</span>(master, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;player_id&quot;</span> =<span class="st"> &quot;playerID&quot;</span>))</span></code></pre></div>
</div>
<div id="rename-columns" class="section level3 unnumbered">
<h3>Rename Columns</h3>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="2-data-manipulation.html#cb42-1"></a>slgname <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb42-2"><a href="2-data-manipulation.html#cb42-2"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">doubles =</span> x2b, <span class="dt">triples =</span> x3b)</span></code></pre></div>
<pre><code>## # A tibble: 1,564 x 9
##    player_id     h doubles triples    hr    ab     g   slg player        
##    &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;         
##  1 ruthba01   2873     506     136   714  8398  2503 0.690 Babe Ruth     
##  2 willite01  2654     525      71   521  7706  2292 0.634 Ted Williams  
##  3 gehrilo01  2721     534     163   493  8001  2164 0.632 Lou Gehrig    
##  4 foxxji01   2646     458     125   534  8134  2317 0.609 Jimmie Foxx   
##  5 bondsba01  2935     601      77   762  9847  2986 0.607 Barry Bonds   
##  6 greenha01  1628     379      71   331  5193  1394 0.605 Hank Greenberg
##  7 mcgwima01  1626     252       6   583  6187  1874 0.588 Mark McGwire  
##  8 ramirma02  2574     547      20   555  8244  2302 0.585 Manny Ramirez 
##  9 dimagjo01  2214     389     131   361  6821  1736 0.579 Joe DiMaggio  
## 10 hornsro01  2930     541     169   301  8173  2259 0.577 Rogers Hornsby
## # ... with 1,554 more rows</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="2-data-manipulation.html#cb44-1"></a>slgname =<span class="st"> </span></span>
<span id="cb44-2"><a href="2-data-manipulation.html#cb44-2"></a>slgname <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb44-3"><a href="2-data-manipulation.html#cb44-3"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">doubles =</span> x2b, <span class="dt">triples =</span> x3b)</span></code></pre></div>
</div>
<div id="reorder-columns" class="section level3 unnumbered">
<h3>Reorder Columns</h3>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="2-data-manipulation.html#cb45-1"></a>slgname <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb45-2"><a href="2-data-manipulation.html#cb45-2"></a><span class="st">  </span><span class="kw">select</span>(player_id, player, <span class="kw">everything</span>())</span></code></pre></div>
<pre><code>## # A tibble: 1,564 x 9
##    player_id player             h doubles triples    hr    ab     g   slg
##    &lt;chr&gt;     &lt;chr&gt;          &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 ruthba01  Babe Ruth       2873     506     136   714  8398  2503 0.690
##  2 willite01 Ted Williams    2654     525      71   521  7706  2292 0.634
##  3 gehrilo01 Lou Gehrig      2721     534     163   493  8001  2164 0.632
##  4 foxxji01  Jimmie Foxx     2646     458     125   534  8134  2317 0.609
##  5 bondsba01 Barry Bonds     2935     601      77   762  9847  2986 0.607
##  6 greenha01 Hank Greenberg  1628     379      71   331  5193  1394 0.605
##  7 mcgwima01 Mark McGwire    1626     252       6   583  6187  1874 0.588
##  8 ramirma02 Manny Ramirez   2574     547      20   555  8244  2302 0.585
##  9 dimagjo01 Joe DiMaggio    2214     389     131   361  6821  1736 0.579
## 10 hornsro01 Rogers Hornsby  2930     541     169   301  8173  2259 0.577
## # ... with 1,554 more rows</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="2-data-manipulation.html#cb47-1"></a>slgname =</span>
<span id="cb47-2"><a href="2-data-manipulation.html#cb47-2"></a>slgname <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb47-3"><a href="2-data-manipulation.html#cb47-3"></a><span class="st">  </span><span class="kw">select</span>(player_id, player, <span class="kw">everything</span>())</span></code></pre></div>
</div>
</div>
<div id="other-dplyr-tricks" class="section level2">
<h2><span class="header-section-number">2.4</span> Other dplyr Tricks</h2>
<div id="count" class="section level3 unnumbered">
<h3>Count</h3>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="2-data-manipulation.html#cb48-1"></a>data</span></code></pre></div>
<pre><code>## # A tibble: 102,816 x 22
##    player_id year_id stint team_id lg_id     g    ab     r     h   x2b   x3b    hr
##    &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 abercda01    1871     1 TRO     &lt;NA&gt;      1     4     0     0     0     0     0
##  2 addybo01     1871     1 RC1     &lt;NA&gt;     25   118    30    32     6     0     0
##  3 allisar01    1871     1 CL1     &lt;NA&gt;     29   137    28    40     4     5     0
##  4 allisdo01    1871     1 WS3     &lt;NA&gt;     27   133    28    44    10     2     2
##  5 ansonca01    1871     1 RC1     &lt;NA&gt;     25   120    29    39    11     3     0
##  6 armstbo01    1871     1 FW1     &lt;NA&gt;     12    49     9    11     2     1     0
##  7 barkeal01    1871     1 RC1     &lt;NA&gt;      1     4     0     1     0     0     0
##  8 barnero01    1871     1 BS1     &lt;NA&gt;     31   157    66    63    10     9     0
##  9 barrebi01    1871     1 FW1     &lt;NA&gt;      1     5     1     1     1     0     0
## 10 barrofr01    1871     1 BS1     &lt;NA&gt;     18    86    13    13     2     1     0
## # ... with 102,806 more rows, and 10 more variables: rbi &lt;dbl&gt;, sb &lt;dbl&gt;, cs &lt;dbl&gt;,
## #   bb &lt;dbl&gt;, so &lt;dbl&gt;, ibb &lt;dbl&gt;, hbp &lt;dbl&gt;, sh &lt;dbl&gt;, sf &lt;dbl&gt;, gidp &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="2-data-manipulation.html#cb50-1"></a>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb50-2"><a href="2-data-manipulation.html#cb50-2"></a><span class="st">  </span><span class="kw">count</span>(player_id)</span></code></pre></div>
<pre><code>## # A tibble: 18,915 x 2
##    player_id     n
##    &lt;chr&gt;     &lt;int&gt;
##  1 aardsda01     9
##  2 aaronha01    23
##  3 aaronto01     7
##  4 aasedo01     13
##  5 abadan01      3
##  6 abadfe01      8
##  7 abadijo01     2
##  8 abbated01    10
##  9 abbeybe01     6
## 10 abbeych01     5
## # ... with 18,905 more rows</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="2-data-manipulation.html#cb52-1"></a>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb52-2"><a href="2-data-manipulation.html#cb52-2"></a><span class="st">  </span><span class="kw">count</span>(player_id, <span class="dt">sort =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 18,915 x 2
##    player_id     n
##    &lt;chr&gt;     &lt;int&gt;
##  1 mcguide01    31
##  2 henderi01    29
##  3 newsobo01    29
##  4 johnto01     28
##  5 kaatji01     28
##  6 ansonca01    27
##  7 baineha01    27
##  8 carltst01    27
##  9 moyerja01    27
## 10 ryanno01     27
## # ... with 18,905 more rows</code></pre>
</div>
<div id="uncount" class="section level3 unnumbered">
<h3>Uncount</h3>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="2-data-manipulation.html#cb54-1"></a>slgname <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb54-2"><a href="2-data-manipulation.html#cb54-2"></a><span class="st">  </span><span class="kw">uncount</span>(triples)</span></code></pre></div>
<pre><code>## # A tibble: 80,303 x 8
##    player_id player        h doubles    hr    ab     g   slg
##    &lt;chr&gt;     &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 ruthba01  Babe Ruth  2873     506   714  8398  2503 0.690
##  2 ruthba01  Babe Ruth  2873     506   714  8398  2503 0.690
##  3 ruthba01  Babe Ruth  2873     506   714  8398  2503 0.690
##  4 ruthba01  Babe Ruth  2873     506   714  8398  2503 0.690
##  5 ruthba01  Babe Ruth  2873     506   714  8398  2503 0.690
##  6 ruthba01  Babe Ruth  2873     506   714  8398  2503 0.690
##  7 ruthba01  Babe Ruth  2873     506   714  8398  2503 0.690
##  8 ruthba01  Babe Ruth  2873     506   714  8398  2503 0.690
##  9 ruthba01  Babe Ruth  2873     506   714  8398  2503 0.690
## 10 ruthba01  Babe Ruth  2873     506   714  8398  2503 0.690
## # ... with 80,293 more rows</code></pre>
</div>
<div id="summarise-1" class="section level3 unnumbered">
<h3>Summarise</h3>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="2-data-manipulation.html#cb56-1"></a>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb56-2"><a href="2-data-manipulation.html#cb56-2"></a><span class="st">  </span><span class="kw">select</span>(player_id,year_id,h,x2b,x3b,hr,ab, g) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb56-3"><a href="2-data-manipulation.html#cb56-3"></a><span class="st">  </span><span class="kw">group_by</span>(player_id) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb56-4"><a href="2-data-manipulation.html#cb56-4"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">h =</span> <span class="kw">sum</span>(h), </span>
<span id="cb56-5"><a href="2-data-manipulation.html#cb56-5"></a>            <span class="dt">x2b =</span> <span class="kw">sum</span>(x2b),</span>
<span id="cb56-6"><a href="2-data-manipulation.html#cb56-6"></a>            <span class="dt">x3b =</span> <span class="kw">sum</span>(x3b),</span>
<span id="cb56-7"><a href="2-data-manipulation.html#cb56-7"></a>            <span class="dt">hr =</span> <span class="kw">sum</span>(hr),</span>
<span id="cb56-8"><a href="2-data-manipulation.html#cb56-8"></a>            <span class="dt">ab =</span> <span class="kw">sum</span>(ab),</span>
<span id="cb56-9"><a href="2-data-manipulation.html#cb56-9"></a>            <span class="dt">g =</span> <span class="kw">sum</span>(g)) </span></code></pre></div>
<pre><code>## # A tibble: 18,915 x 7
##    player_id     h   x2b   x3b    hr    ab     g
##    &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 aardsda01     0     0     0     0     4   331
##  2 aaronha01  3771   624    98   755 12364  3298
##  3 aaronto01   216    42     6    13   944   437
##  4 aasedo01      0     0     0     0     5   448
##  5 abadan01      2     0     0     0    21    15
##  6 abadfe01      1     0     0     0     9   315
##  7 abadijo01    11     0     0     0    49    12
##  8 abbated01   772    99    43    11  3044   855
##  9 abbeybe01    38     3     3     0   225    79
## 10 abbeych01   492    67    46    19  1751   451
## # ... with 18,905 more rows</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="2-data-manipulation.html#cb58-1"></a>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb58-2"><a href="2-data-manipulation.html#cb58-2"></a><span class="st">  </span><span class="kw">select</span>(player_id,year_id,h,x2b,x3b,hr,ab, g) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb58-3"><a href="2-data-manipulation.html#cb58-3"></a><span class="st">  </span><span class="kw">group_by</span>(player_id) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb58-4"><a href="2-data-manipulation.html#cb58-4"></a><span class="st">  </span><span class="kw">summarise_at</span>(<span class="kw">vars</span>(<span class="op">-</span>year_id),<span class="op">~</span><span class="kw">sum</span>(.))</span></code></pre></div>
<pre><code>## # A tibble: 18,915 x 7
##    player_id     h   x2b   x3b    hr    ab     g
##    &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 aardsda01     0     0     0     0     4   331
##  2 aaronha01  3771   624    98   755 12364  3298
##  3 aaronto01   216    42     6    13   944   437
##  4 aasedo01      0     0     0     0     5   448
##  5 abadan01      2     0     0     0    21    15
##  6 abadfe01      1     0     0     0     9   315
##  7 abadijo01    11     0     0     0    49    12
##  8 abbated01   772    99    43    11  3044   855
##  9 abbeybe01    38     3     3     0   225    79
## 10 abbeych01   492    67    46    19  1751   451
## # ... with 18,905 more rows</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="3-data-visualization.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "none"
}
});
});
</script>

</body>

</html>
